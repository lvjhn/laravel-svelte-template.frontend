import{S as jo,i as Io,s as Do,D as Uo,k as Fo,l as qo,m as Bo,h as Xe,n as Ho,b as Mo,E as zo,F as Jo,G as Wo,f as Xo,t as Vo}from"../../chunks/index-103aa26d.js";import{o as $o}from"../../chunks/on-client-01546862.js";function an(i,o){return function(){return i.apply(o,arguments)}}const{toString:cn}=Object.prototype,{getPrototypeOf:ce}=Object,ue=(i=>o=>{const s=cn.call(o);return i[s]||(i[s]=s.slice(8,-1).toLowerCase())})(Object.create(null)),nt=i=>(i=i.toLowerCase(),o=>ue(o)===i),Nt=i=>o=>typeof o===i,{isArray:ft}=Array,gt=Nt("undefined");function Go(i){return i!==null&&!gt(i)&&i.constructor!==null&&!gt(i.constructor)&&it(i.constructor.isBuffer)&&i.constructor.isBuffer(i)}const un=nt("ArrayBuffer");function Ko(i){let o;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?o=ArrayBuffer.isView(i):o=i&&i.buffer&&un(i.buffer),o}const Qo=Nt("string"),it=Nt("function"),ln=Nt("number"),le=i=>i!==null&&typeof i=="object",Yo=i=>i===!0||i===!1,Pt=i=>{if(ue(i)!=="object")return!1;const o=ce(i);return(o===null||o===Object.prototype||Object.getPrototypeOf(o)===null)&&!(Symbol.toStringTag in i)&&!(Symbol.iterator in i)},Zo=nt("Date"),ts=nt("File"),es=nt("Blob"),ns=nt("FileList"),rs=i=>le(i)&&it(i.pipe),is=i=>{const o="[object FormData]";return i&&(typeof FormData=="function"&&i instanceof FormData||cn.call(i)===o||it(i.toString)&&i.toString()===o)},os=nt("URLSearchParams"),ss=i=>i.trim?i.trim():i.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function bt(i,o,{allOwnKeys:s=!1}={}){if(i===null||typeof i>"u")return;let c,u;if(typeof i!="object"&&(i=[i]),ft(i))for(c=0,u=i.length;c<u;c++)o.call(null,i[c],c,i);else{const h=s?Object.getOwnPropertyNames(i):Object.keys(i),f=h.length;let y;for(c=0;c<f;c++)y=h[c],o.call(null,i[y],y,i)}}function hn(i,o){o=o.toLowerCase();const s=Object.keys(i);let c=s.length,u;for(;c-- >0;)if(u=s[c],o===u.toLowerCase())return u;return null}const fn=(()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global)(),pn=i=>!gt(i)&&i!==fn;function ee(){const{caseless:i}=pn(this)&&this||{},o={},s=(c,u)=>{const h=i&&hn(o,u)||u;Pt(o[h])&&Pt(c)?o[h]=ee(o[h],c):Pt(c)?o[h]=ee({},c):ft(c)?o[h]=c.slice():o[h]=c};for(let c=0,u=arguments.length;c<u;c++)arguments[c]&&bt(arguments[c],s);return o}const as=(i,o,s,{allOwnKeys:c}={})=>(bt(o,(u,h)=>{s&&it(u)?i[h]=an(u,s):i[h]=u},{allOwnKeys:c}),i),cs=i=>(i.charCodeAt(0)===65279&&(i=i.slice(1)),i),us=(i,o,s,c)=>{i.prototype=Object.create(o.prototype,c),i.prototype.constructor=i,Object.defineProperty(i,"super",{value:o.prototype}),s&&Object.assign(i.prototype,s)},ls=(i,o,s,c)=>{let u,h,f;const y={};if(o=o||{},i==null)return o;do{for(u=Object.getOwnPropertyNames(i),h=u.length;h-- >0;)f=u[h],(!c||c(f,i,o))&&!y[f]&&(o[f]=i[f],y[f]=!0);i=s!==!1&&ce(i)}while(i&&(!s||s(i,o))&&i!==Object.prototype);return o},hs=(i,o,s)=>{i=String(i),(s===void 0||s>i.length)&&(s=i.length),s-=o.length;const c=i.indexOf(o,s);return c!==-1&&c===s},fs=i=>{if(!i)return null;if(ft(i))return i;let o=i.length;if(!ln(o))return null;const s=new Array(o);for(;o-- >0;)s[o]=i[o];return s},ps=(i=>o=>i&&o instanceof i)(typeof Uint8Array<"u"&&ce(Uint8Array)),ds=(i,o)=>{const c=(i&&i[Symbol.iterator]).call(i);let u;for(;(u=c.next())&&!u.done;){const h=u.value;o.call(i,h[0],h[1])}},ys=(i,o)=>{let s;const c=[];for(;(s=i.exec(o))!==null;)c.push(s);return c},vs=nt("HTMLFormElement"),ms=i=>i.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(s,c,u){return c.toUpperCase()+u}),Ve=(({hasOwnProperty:i})=>(o,s)=>i.call(o,s))(Object.prototype),gs=nt("RegExp"),dn=(i,o)=>{const s=Object.getOwnPropertyDescriptors(i),c={};bt(s,(u,h)=>{o(u,h,i)!==!1&&(c[h]=u)}),Object.defineProperties(i,c)},bs=i=>{dn(i,(o,s)=>{if(it(i)&&["arguments","caller","callee"].indexOf(s)!==-1)return!1;const c=i[s];if(it(c)){if(o.enumerable=!1,"writable"in o){o.writable=!1;return}o.set||(o.set=()=>{throw Error("Can not rewrite read-only method '"+s+"'")})}})},_s=(i,o)=>{const s={},c=u=>{u.forEach(h=>{s[h]=!0})};return ft(i)?c(i):c(String(i).split(o)),s},ws=()=>{},Ss=(i,o)=>(i=+i,Number.isFinite(i)?i:o),Qt="abcdefghijklmnopqrstuvwxyz",$e="0123456789",yn={DIGIT:$e,ALPHA:Qt,ALPHA_DIGIT:Qt+Qt.toUpperCase()+$e},ks=(i=16,o=yn.ALPHA_DIGIT)=>{let s="";const{length:c}=o;for(;i--;)s+=o[Math.random()*c|0];return s};function Cs(i){return!!(i&&it(i.append)&&i[Symbol.toStringTag]==="FormData"&&i[Symbol.iterator])}const Ts=i=>{const o=new Array(10),s=(c,u)=>{if(le(c)){if(o.indexOf(c)>=0)return;if(!("toJSON"in c)){o[u]=c;const h=ft(c)?[]:{};return bt(c,(f,y)=>{const b=s(f,u+1);!gt(b)&&(h[y]=b)}),o[u]=void 0,h}}return c};return s(i,0)},d={isArray:ft,isArrayBuffer:un,isBuffer:Go,isFormData:is,isArrayBufferView:Ko,isString:Qo,isNumber:ln,isBoolean:Yo,isObject:le,isPlainObject:Pt,isUndefined:gt,isDate:Zo,isFile:ts,isBlob:es,isRegExp:gs,isFunction:it,isStream:rs,isURLSearchParams:os,isTypedArray:ps,isFileList:ns,forEach:bt,merge:ee,extend:as,trim:ss,stripBOM:cs,inherits:us,toFlatObject:ls,kindOf:ue,kindOfTest:nt,endsWith:hs,toArray:fs,forEachEntry:ds,matchAll:ys,isHTMLForm:vs,hasOwnProperty:Ve,hasOwnProp:Ve,reduceDescriptors:dn,freezeMethods:bs,toObjectSet:_s,toCamelCase:ms,noop:ws,toFiniteNumber:Ss,findKey:hn,global:fn,isContextDefined:pn,ALPHABET:yn,generateString:ks,isSpecCompliantForm:Cs,toJSONObject:Ts};function L(i,o,s,c,u){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=i,this.name="AxiosError",o&&(this.code=o),s&&(this.config=s),c&&(this.request=c),u&&(this.response=u)}d.inherits(L,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:d.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const vn=L.prototype,mn={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(i=>{mn[i]={value:i}});Object.defineProperties(L,mn);Object.defineProperty(vn,"isAxiosError",{value:!0});L.from=(i,o,s,c,u,h)=>{const f=Object.create(vn);return d.toFlatObject(i,f,function(b){return b!==Error.prototype},y=>y!=="isAxiosError"),L.call(f,i.message,o,s,c,u),f.cause=i,f.name=i.name,h&&Object.assign(f,h),f};const Ps=null;function ne(i){return d.isPlainObject(i)||d.isArray(i)}function gn(i){return d.endsWith(i,"[]")?i.slice(0,-2):i}function Ge(i,o,s){return i?i.concat(o).map(function(u,h){return u=gn(u),!s&&h?"["+u+"]":u}).join(s?".":""):o}function Os(i){return d.isArray(i)&&!i.some(ne)}const Es=d.toFlatObject(d,{},null,function(o){return/^is[A-Z]/.test(o)});function jt(i,o,s){if(!d.isObject(i))throw new TypeError("target must be an object");o=o||new FormData,s=d.toFlatObject(s,{metaTokens:!0,dots:!1,indexes:!1},!1,function(w,m){return!d.isUndefined(m[w])});const c=s.metaTokens,u=s.visitor||S,h=s.dots,f=s.indexes,b=(s.Blob||typeof Blob<"u"&&Blob)&&d.isSpecCompliantForm(o);if(!d.isFunction(u))throw new TypeError("visitor must be a function");function v(k){if(k===null)return"";if(d.isDate(k))return k.toISOString();if(!b&&d.isBlob(k))throw new L("Blob is not supported. Use a Buffer instead.");return d.isArrayBuffer(k)||d.isTypedArray(k)?b&&typeof Blob=="function"?new Blob([k]):Buffer.from(k):k}function S(k,w,m){let _=k;if(k&&!m&&typeof k=="object"){if(d.endsWith(w,"{}"))w=c?w:w.slice(0,-2),k=JSON.stringify(k);else if(d.isArray(k)&&Os(k)||(d.isFileList(k)||d.endsWith(w,"[]"))&&(_=d.toArray(k)))return w=gn(w),_.forEach(function(N,U){!(d.isUndefined(N)||N===null)&&o.append(f===!0?Ge([w],U,h):f===null?w:w+"[]",v(N))}),!1}return ne(k)?!0:(o.append(Ge(m,w,h),v(k)),!1)}const T=[],O=Object.assign(Es,{defaultVisitor:S,convertValue:v,isVisitable:ne});function P(k,w){if(!d.isUndefined(k)){if(T.indexOf(k)!==-1)throw Error("Circular reference detected in "+w.join("."));T.push(k),d.forEach(k,function(_,x){(!(d.isUndefined(_)||_===null)&&u.call(o,_,d.isString(x)?x.trim():x,w,O))===!0&&P(_,w?w.concat(x):[x])}),T.pop()}}if(!d.isObject(i))throw new TypeError("data must be an object");return P(i),o}function Ke(i){const o={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(i).replace(/[!'()~]|%20|%00/g,function(c){return o[c]})}function he(i,o){this._pairs=[],i&&jt(i,this,o)}const bn=he.prototype;bn.append=function(o,s){this._pairs.push([o,s])};bn.toString=function(o){const s=o?function(c){return o.call(this,c,Ke)}:Ke;return this._pairs.map(function(u){return s(u[0])+"="+s(u[1])},"").join("&")};function xs(i){return encodeURIComponent(i).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function _n(i,o,s){if(!o)return i;const c=s&&s.encode||xs,u=s&&s.serialize;let h;if(u?h=u(o,s):h=d.isURLSearchParams(o)?o.toString():new he(o,s).toString(c),h){const f=i.indexOf("#");f!==-1&&(i=i.slice(0,f)),i+=(i.indexOf("?")===-1?"?":"&")+h}return i}class As{constructor(){this.handlers=[]}use(o,s,c){return this.handlers.push({fulfilled:o,rejected:s,synchronous:c?c.synchronous:!1,runWhen:c?c.runWhen:null}),this.handlers.length-1}eject(o){this.handlers[o]&&(this.handlers[o]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(o){d.forEach(this.handlers,function(c){c!==null&&o(c)})}}const Qe=As,wn={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Rs=typeof URLSearchParams<"u"?URLSearchParams:he,Ls=typeof FormData<"u"?FormData:null,Ns=(()=>{let i;return typeof navigator<"u"&&((i=navigator.product)==="ReactNative"||i==="NativeScript"||i==="NS")?!1:typeof window<"u"&&typeof document<"u"})(),js=(()=>typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function")(),K={isBrowser:!0,classes:{URLSearchParams:Rs,FormData:Ls,Blob},isStandardBrowserEnv:Ns,isStandardBrowserWebWorkerEnv:js,protocols:["http","https","file","blob","url","data"]};function Is(i,o){return jt(i,new K.classes.URLSearchParams,Object.assign({visitor:function(s,c,u,h){return K.isNode&&d.isBuffer(s)?(this.append(c,s.toString("base64")),!1):h.defaultVisitor.apply(this,arguments)}},o))}function Ds(i){return d.matchAll(/\w+|\[(\w*)]/g,i).map(o=>o[0]==="[]"?"":o[1]||o[0])}function Us(i){const o={},s=Object.keys(i);let c;const u=s.length;let h;for(c=0;c<u;c++)h=s[c],o[h]=i[h];return o}function Sn(i){function o(s,c,u,h){let f=s[h++];const y=Number.isFinite(+f),b=h>=s.length;return f=!f&&d.isArray(u)?u.length:f,b?(d.hasOwnProp(u,f)?u[f]=[u[f],c]:u[f]=c,!y):((!u[f]||!d.isObject(u[f]))&&(u[f]=[]),o(s,c,u[f],h)&&d.isArray(u[f])&&(u[f]=Us(u[f])),!y)}if(d.isFormData(i)&&d.isFunction(i.entries)){const s={};return d.forEachEntry(i,(c,u)=>{o(Ds(c),u,s,0)}),s}return null}const Fs={"Content-Type":void 0};function qs(i,o,s){if(d.isString(i))try{return(o||JSON.parse)(i),d.trim(i)}catch(c){if(c.name!=="SyntaxError")throw c}return(s||JSON.stringify)(i)}const It={transitional:wn,adapter:["xhr","http"],transformRequest:[function(o,s){const c=s.getContentType()||"",u=c.indexOf("application/json")>-1,h=d.isObject(o);if(h&&d.isHTMLForm(o)&&(o=new FormData(o)),d.isFormData(o))return u&&u?JSON.stringify(Sn(o)):o;if(d.isArrayBuffer(o)||d.isBuffer(o)||d.isStream(o)||d.isFile(o)||d.isBlob(o))return o;if(d.isArrayBufferView(o))return o.buffer;if(d.isURLSearchParams(o))return s.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),o.toString();let y;if(h){if(c.indexOf("application/x-www-form-urlencoded")>-1)return Is(o,this.formSerializer).toString();if((y=d.isFileList(o))||c.indexOf("multipart/form-data")>-1){const b=this.env&&this.env.FormData;return jt(y?{"files[]":o}:o,b&&new b,this.formSerializer)}}return h||u?(s.setContentType("application/json",!1),qs(o)):o}],transformResponse:[function(o){const s=this.transitional||It.transitional,c=s&&s.forcedJSONParsing,u=this.responseType==="json";if(o&&d.isString(o)&&(c&&!this.responseType||u)){const f=!(s&&s.silentJSONParsing)&&u;try{return JSON.parse(o)}catch(y){if(f)throw y.name==="SyntaxError"?L.from(y,L.ERR_BAD_RESPONSE,this,null,this.response):y}}return o}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:K.classes.FormData,Blob:K.classes.Blob},validateStatus:function(o){return o>=200&&o<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};d.forEach(["delete","get","head"],function(o){It.headers[o]={}});d.forEach(["post","put","patch"],function(o){It.headers[o]=d.merge(Fs)});const fe=It,Bs=d.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Hs=i=>{const o={};let s,c,u;return i&&i.split(`
`).forEach(function(f){u=f.indexOf(":"),s=f.substring(0,u).trim().toLowerCase(),c=f.substring(u+1).trim(),!(!s||o[s]&&Bs[s])&&(s==="set-cookie"?o[s]?o[s].push(c):o[s]=[c]:o[s]=o[s]?o[s]+", "+c:c)}),o},Ye=Symbol("internals");function mt(i){return i&&String(i).trim().toLowerCase()}function Ot(i){return i===!1||i==null?i:d.isArray(i)?i.map(Ot):String(i)}function Ms(i){const o=Object.create(null),s=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let c;for(;c=s.exec(i);)o[c[1]]=c[2];return o}function zs(i){return/^[-_a-zA-Z]+$/.test(i.trim())}function Yt(i,o,s,c,u){if(d.isFunction(c))return c.call(this,o,s);if(u&&(o=s),!!d.isString(o)){if(d.isString(c))return o.indexOf(c)!==-1;if(d.isRegExp(c))return c.test(o)}}function Js(i){return i.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(o,s,c)=>s.toUpperCase()+c)}function Ws(i,o){const s=d.toCamelCase(" "+o);["get","set","has"].forEach(c=>{Object.defineProperty(i,c+s,{value:function(u,h,f){return this[c].call(this,o,u,h,f)},configurable:!0})})}class Dt{constructor(o){o&&this.set(o)}set(o,s,c){const u=this;function h(y,b,v){const S=mt(b);if(!S)throw new Error("header name must be a non-empty string");const T=d.findKey(u,S);(!T||u[T]===void 0||v===!0||v===void 0&&u[T]!==!1)&&(u[T||b]=Ot(y))}const f=(y,b)=>d.forEach(y,(v,S)=>h(v,S,b));return d.isPlainObject(o)||o instanceof this.constructor?f(o,s):d.isString(o)&&(o=o.trim())&&!zs(o)?f(Hs(o),s):o!=null&&h(s,o,c),this}get(o,s){if(o=mt(o),o){const c=d.findKey(this,o);if(c){const u=this[c];if(!s)return u;if(s===!0)return Ms(u);if(d.isFunction(s))return s.call(this,u,c);if(d.isRegExp(s))return s.exec(u);throw new TypeError("parser must be boolean|regexp|function")}}}has(o,s){if(o=mt(o),o){const c=d.findKey(this,o);return!!(c&&this[c]!==void 0&&(!s||Yt(this,this[c],c,s)))}return!1}delete(o,s){const c=this;let u=!1;function h(f){if(f=mt(f),f){const y=d.findKey(c,f);y&&(!s||Yt(c,c[y],y,s))&&(delete c[y],u=!0)}}return d.isArray(o)?o.forEach(h):h(o),u}clear(o){const s=Object.keys(this);let c=s.length,u=!1;for(;c--;){const h=s[c];(!o||Yt(this,this[h],h,o,!0))&&(delete this[h],u=!0)}return u}normalize(o){const s=this,c={};return d.forEach(this,(u,h)=>{const f=d.findKey(c,h);if(f){s[f]=Ot(u),delete s[h];return}const y=o?Js(h):String(h).trim();y!==h&&delete s[h],s[y]=Ot(u),c[y]=!0}),this}concat(...o){return this.constructor.concat(this,...o)}toJSON(o){const s=Object.create(null);return d.forEach(this,(c,u)=>{c!=null&&c!==!1&&(s[u]=o&&d.isArray(c)?c.join(", "):c)}),s}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([o,s])=>o+": "+s).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(o){return o instanceof this?o:new this(o)}static concat(o,...s){const c=new this(o);return s.forEach(u=>c.set(u)),c}static accessor(o){const c=(this[Ye]=this[Ye]={accessors:{}}).accessors,u=this.prototype;function h(f){const y=mt(f);c[y]||(Ws(u,f),c[y]=!0)}return d.isArray(o)?o.forEach(h):h(o),this}}Dt.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);d.freezeMethods(Dt.prototype);d.freezeMethods(Dt);const et=Dt;function Zt(i,o){const s=this||fe,c=o||s,u=et.from(c.headers);let h=c.data;return d.forEach(i,function(y){h=y.call(s,h,u.normalize(),o?o.status:void 0)}),u.normalize(),h}function kn(i){return!!(i&&i.__CANCEL__)}function _t(i,o,s){L.call(this,i??"canceled",L.ERR_CANCELED,o,s),this.name="CanceledError"}d.inherits(_t,L,{__CANCEL__:!0});function Xs(i,o,s){const c=s.config.validateStatus;!s.status||!c||c(s.status)?i(s):o(new L("Request failed with status code "+s.status,[L.ERR_BAD_REQUEST,L.ERR_BAD_RESPONSE][Math.floor(s.status/100)-4],s.config,s.request,s))}const Vs=K.isStandardBrowserEnv?function(){return{write:function(s,c,u,h,f,y){const b=[];b.push(s+"="+encodeURIComponent(c)),d.isNumber(u)&&b.push("expires="+new Date(u).toGMTString()),d.isString(h)&&b.push("path="+h),d.isString(f)&&b.push("domain="+f),y===!0&&b.push("secure"),document.cookie=b.join("; ")},read:function(s){const c=document.cookie.match(new RegExp("(^|;\\s*)("+s+")=([^;]*)"));return c?decodeURIComponent(c[3]):null},remove:function(s){this.write(s,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}();function $s(i){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(i)}function Gs(i,o){return o?i.replace(/\/+$/,"")+"/"+o.replace(/^\/+/,""):i}function Cn(i,o){return i&&!$s(o)?Gs(i,o):o}const Ks=K.isStandardBrowserEnv?function(){const o=/(msie|trident)/i.test(navigator.userAgent),s=document.createElement("a");let c;function u(h){let f=h;return o&&(s.setAttribute("href",f),f=s.href),s.setAttribute("href",f),{href:s.href,protocol:s.protocol?s.protocol.replace(/:$/,""):"",host:s.host,search:s.search?s.search.replace(/^\?/,""):"",hash:s.hash?s.hash.replace(/^#/,""):"",hostname:s.hostname,port:s.port,pathname:s.pathname.charAt(0)==="/"?s.pathname:"/"+s.pathname}}return c=u(window.location.href),function(f){const y=d.isString(f)?u(f):f;return y.protocol===c.protocol&&y.host===c.host}}():function(){return function(){return!0}}();function Qs(i){const o=/^([-+\w]{1,25})(:?\/\/|:)/.exec(i);return o&&o[1]||""}function Ys(i,o){i=i||10;const s=new Array(i),c=new Array(i);let u=0,h=0,f;return o=o!==void 0?o:1e3,function(b){const v=Date.now(),S=c[h];f||(f=v),s[u]=b,c[u]=v;let T=h,O=0;for(;T!==u;)O+=s[T++],T=T%i;if(u=(u+1)%i,u===h&&(h=(h+1)%i),v-f<o)return;const P=S&&v-S;return P?Math.round(O*1e3/P):void 0}}function Ze(i,o){let s=0;const c=Ys(50,250);return u=>{const h=u.loaded,f=u.lengthComputable?u.total:void 0,y=h-s,b=c(y),v=h<=f;s=h;const S={loaded:h,total:f,progress:f?h/f:void 0,bytes:y,rate:b||void 0,estimated:b&&f&&v?(f-h)/b:void 0,event:u};S[o?"download":"upload"]=!0,i(S)}}const Zs=typeof XMLHttpRequest<"u",ta=Zs&&function(i){return new Promise(function(s,c){let u=i.data;const h=et.from(i.headers).normalize(),f=i.responseType;let y;function b(){i.cancelToken&&i.cancelToken.unsubscribe(y),i.signal&&i.signal.removeEventListener("abort",y)}d.isFormData(u)&&(K.isStandardBrowserEnv||K.isStandardBrowserWebWorkerEnv)&&h.setContentType(!1);let v=new XMLHttpRequest;if(i.auth){const P=i.auth.username||"",k=i.auth.password?unescape(encodeURIComponent(i.auth.password)):"";h.set("Authorization","Basic "+btoa(P+":"+k))}const S=Cn(i.baseURL,i.url);v.open(i.method.toUpperCase(),_n(S,i.params,i.paramsSerializer),!0),v.timeout=i.timeout;function T(){if(!v)return;const P=et.from("getAllResponseHeaders"in v&&v.getAllResponseHeaders()),w={data:!f||f==="text"||f==="json"?v.responseText:v.response,status:v.status,statusText:v.statusText,headers:P,config:i,request:v};Xs(function(_){s(_),b()},function(_){c(_),b()},w),v=null}if("onloadend"in v?v.onloadend=T:v.onreadystatechange=function(){!v||v.readyState!==4||v.status===0&&!(v.responseURL&&v.responseURL.indexOf("file:")===0)||setTimeout(T)},v.onabort=function(){v&&(c(new L("Request aborted",L.ECONNABORTED,i,v)),v=null)},v.onerror=function(){c(new L("Network Error",L.ERR_NETWORK,i,v)),v=null},v.ontimeout=function(){let k=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const w=i.transitional||wn;i.timeoutErrorMessage&&(k=i.timeoutErrorMessage),c(new L(k,w.clarifyTimeoutError?L.ETIMEDOUT:L.ECONNABORTED,i,v)),v=null},K.isStandardBrowserEnv){const P=(i.withCredentials||Ks(S))&&i.xsrfCookieName&&Vs.read(i.xsrfCookieName);P&&h.set(i.xsrfHeaderName,P)}u===void 0&&h.setContentType(null),"setRequestHeader"in v&&d.forEach(h.toJSON(),function(k,w){v.setRequestHeader(w,k)}),d.isUndefined(i.withCredentials)||(v.withCredentials=!!i.withCredentials),f&&f!=="json"&&(v.responseType=i.responseType),typeof i.onDownloadProgress=="function"&&v.addEventListener("progress",Ze(i.onDownloadProgress,!0)),typeof i.onUploadProgress=="function"&&v.upload&&v.upload.addEventListener("progress",Ze(i.onUploadProgress)),(i.cancelToken||i.signal)&&(y=P=>{v&&(c(!P||P.type?new _t(null,i,v):P),v.abort(),v=null)},i.cancelToken&&i.cancelToken.subscribe(y),i.signal&&(i.signal.aborted?y():i.signal.addEventListener("abort",y)));const O=Qs(S);if(O&&K.protocols.indexOf(O)===-1){c(new L("Unsupported protocol "+O+":",L.ERR_BAD_REQUEST,i));return}v.send(u||null)})},Et={http:Ps,xhr:ta};d.forEach(Et,(i,o)=>{if(i){try{Object.defineProperty(i,"name",{value:o})}catch{}Object.defineProperty(i,"adapterName",{value:o})}});const ea={getAdapter:i=>{i=d.isArray(i)?i:[i];const{length:o}=i;let s,c;for(let u=0;u<o&&(s=i[u],!(c=d.isString(s)?Et[s.toLowerCase()]:s));u++);if(!c)throw c===!1?new L(`Adapter ${s} is not supported by the environment`,"ERR_NOT_SUPPORT"):new Error(d.hasOwnProp(Et,s)?`Adapter '${s}' is not available in the build`:`Unknown adapter '${s}'`);if(!d.isFunction(c))throw new TypeError("adapter is not a function");return c},adapters:Et};function te(i){if(i.cancelToken&&i.cancelToken.throwIfRequested(),i.signal&&i.signal.aborted)throw new _t(null,i)}function tn(i){return te(i),i.headers=et.from(i.headers),i.data=Zt.call(i,i.transformRequest),["post","put","patch"].indexOf(i.method)!==-1&&i.headers.setContentType("application/x-www-form-urlencoded",!1),ea.getAdapter(i.adapter||fe.adapter)(i).then(function(c){return te(i),c.data=Zt.call(i,i.transformResponse,c),c.headers=et.from(c.headers),c},function(c){return kn(c)||(te(i),c&&c.response&&(c.response.data=Zt.call(i,i.transformResponse,c.response),c.response.headers=et.from(c.response.headers))),Promise.reject(c)})}const en=i=>i instanceof et?i.toJSON():i;function ht(i,o){o=o||{};const s={};function c(v,S,T){return d.isPlainObject(v)&&d.isPlainObject(S)?d.merge.call({caseless:T},v,S):d.isPlainObject(S)?d.merge({},S):d.isArray(S)?S.slice():S}function u(v,S,T){if(d.isUndefined(S)){if(!d.isUndefined(v))return c(void 0,v,T)}else return c(v,S,T)}function h(v,S){if(!d.isUndefined(S))return c(void 0,S)}function f(v,S){if(d.isUndefined(S)){if(!d.isUndefined(v))return c(void 0,v)}else return c(void 0,S)}function y(v,S,T){if(T in o)return c(v,S);if(T in i)return c(void 0,v)}const b={url:h,method:h,data:h,baseURL:f,transformRequest:f,transformResponse:f,paramsSerializer:f,timeout:f,timeoutMessage:f,withCredentials:f,adapter:f,responseType:f,xsrfCookieName:f,xsrfHeaderName:f,onUploadProgress:f,onDownloadProgress:f,decompress:f,maxContentLength:f,maxBodyLength:f,beforeRedirect:f,transport:f,httpAgent:f,httpsAgent:f,cancelToken:f,socketPath:f,responseEncoding:f,validateStatus:y,headers:(v,S)=>u(en(v),en(S),!0)};return d.forEach(Object.keys(i).concat(Object.keys(o)),function(S){const T=b[S]||u,O=T(i[S],o[S],S);d.isUndefined(O)&&T!==y||(s[S]=O)}),s}const Tn="1.3.3",pe={};["object","boolean","number","function","string","symbol"].forEach((i,o)=>{pe[i]=function(c){return typeof c===i||"a"+(o<1?"n ":" ")+i}});const nn={};pe.transitional=function(o,s,c){function u(h,f){return"[Axios v"+Tn+"] Transitional option '"+h+"'"+f+(c?". "+c:"")}return(h,f,y)=>{if(o===!1)throw new L(u(f," has been removed"+(s?" in "+s:"")),L.ERR_DEPRECATED);return s&&!nn[f]&&(nn[f]=!0,console.warn(u(f," has been deprecated since v"+s+" and will be removed in the near future"))),o?o(h,f,y):!0}};function na(i,o,s){if(typeof i!="object")throw new L("options must be an object",L.ERR_BAD_OPTION_VALUE);const c=Object.keys(i);let u=c.length;for(;u-- >0;){const h=c[u],f=o[h];if(f){const y=i[h],b=y===void 0||f(y,h,i);if(b!==!0)throw new L("option "+h+" must be "+b,L.ERR_BAD_OPTION_VALUE);continue}if(s!==!0)throw new L("Unknown option "+h,L.ERR_BAD_OPTION)}}const re={assertOptions:na,validators:pe},rt=re.validators;let At=class{constructor(o){this.defaults=o,this.interceptors={request:new Qe,response:new Qe}}request(o,s){typeof o=="string"?(s=s||{},s.url=o):s=o||{},s=ht(this.defaults,s);const{transitional:c,paramsSerializer:u,headers:h}=s;c!==void 0&&re.assertOptions(c,{silentJSONParsing:rt.transitional(rt.boolean),forcedJSONParsing:rt.transitional(rt.boolean),clarifyTimeoutError:rt.transitional(rt.boolean)},!1),u!==void 0&&re.assertOptions(u,{encode:rt.function,serialize:rt.function},!0),s.method=(s.method||this.defaults.method||"get").toLowerCase();let f;f=h&&d.merge(h.common,h[s.method]),f&&d.forEach(["delete","get","head","post","put","patch","common"],k=>{delete h[k]}),s.headers=et.concat(f,h);const y=[];let b=!0;this.interceptors.request.forEach(function(w){typeof w.runWhen=="function"&&w.runWhen(s)===!1||(b=b&&w.synchronous,y.unshift(w.fulfilled,w.rejected))});const v=[];this.interceptors.response.forEach(function(w){v.push(w.fulfilled,w.rejected)});let S,T=0,O;if(!b){const k=[tn.bind(this),void 0];for(k.unshift.apply(k,y),k.push.apply(k,v),O=k.length,S=Promise.resolve(s);T<O;)S=S.then(k[T++],k[T++]);return S}O=y.length;let P=s;for(T=0;T<O;){const k=y[T++],w=y[T++];try{P=k(P)}catch(m){w.call(this,m);break}}try{S=tn.call(this,P)}catch(k){return Promise.reject(k)}for(T=0,O=v.length;T<O;)S=S.then(v[T++],v[T++]);return S}getUri(o){o=ht(this.defaults,o);const s=Cn(o.baseURL,o.url);return _n(s,o.params,o.paramsSerializer)}};d.forEach(["delete","get","head","options"],function(o){At.prototype[o]=function(s,c){return this.request(ht(c||{},{method:o,url:s,data:(c||{}).data}))}});d.forEach(["post","put","patch"],function(o){function s(c){return function(h,f,y){return this.request(ht(y||{},{method:o,headers:c?{"Content-Type":"multipart/form-data"}:{},url:h,data:f}))}}At.prototype[o]=s(),At.prototype[o+"Form"]=s(!0)});const xt=At;class de{constructor(o){if(typeof o!="function")throw new TypeError("executor must be a function.");let s;this.promise=new Promise(function(h){s=h});const c=this;this.promise.then(u=>{if(!c._listeners)return;let h=c._listeners.length;for(;h-- >0;)c._listeners[h](u);c._listeners=null}),this.promise.then=u=>{let h;const f=new Promise(y=>{c.subscribe(y),h=y}).then(u);return f.cancel=function(){c.unsubscribe(h)},f},o(function(h,f,y){c.reason||(c.reason=new _t(h,f,y),s(c.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(o){if(this.reason){o(this.reason);return}this._listeners?this._listeners.push(o):this._listeners=[o]}unsubscribe(o){if(!this._listeners)return;const s=this._listeners.indexOf(o);s!==-1&&this._listeners.splice(s,1)}static source(){let o;return{token:new de(function(u){o=u}),cancel:o}}}const ra=de;function ia(i){return function(s){return i.apply(null,s)}}function oa(i){return d.isObject(i)&&i.isAxiosError===!0}const ie={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(ie).forEach(([i,o])=>{ie[o]=i});const sa=ie;function Pn(i){const o=new xt(i),s=an(xt.prototype.request,o);return d.extend(s,xt.prototype,o,{allOwnKeys:!0}),d.extend(s,o,null,{allOwnKeys:!0}),s.create=function(u){return Pn(ht(i,u))},s}const D=Pn(fe);D.Axios=xt;D.CanceledError=_t;D.CancelToken=ra;D.isCancel=kn;D.VERSION=Tn;D.toFormData=jt;D.AxiosError=L;D.Cancel=D.CanceledError;D.all=function(o){return Promise.all(o)};D.spread=ia;D.isAxiosError=oa;D.mergeConfig=ht;D.AxiosHeaders=et;D.formToJSON=i=>Sn(d.isHTMLForm(i)?new FormData(i):i);D.HttpStatusCode=sa;D.default=D;const On=D;var rn={},aa={get exports(){return rn},set exports(i){rn=i}};/*!
 * Pusher JavaScript Library v8.0.1
 * https://pusher.com/
 *
 * Copyright 2020, Pusher
 * Released under the MIT licence.
 */(function(i,o){(function(c,u){i.exports=u()})(window,function(){return function(s){var c={};function u(h){if(c[h])return c[h].exports;var f=c[h]={i:h,l:!1,exports:{}};return s[h].call(f.exports,f,f.exports,u),f.l=!0,f.exports}return u.m=s,u.c=c,u.d=function(h,f,y){u.o(h,f)||Object.defineProperty(h,f,{enumerable:!0,get:y})},u.r=function(h){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(h,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(h,"__esModule",{value:!0})},u.t=function(h,f){if(f&1&&(h=u(h)),f&8||f&4&&typeof h=="object"&&h&&h.__esModule)return h;var y=Object.create(null);if(u.r(y),Object.defineProperty(y,"default",{enumerable:!0,value:h}),f&2&&typeof h!="string")for(var b in h)u.d(y,b,function(v){return h[v]}.bind(null,b));return y},u.n=function(h){var f=h&&h.__esModule?function(){return h.default}:function(){return h};return u.d(f,"a",f),f},u.o=function(h,f){return Object.prototype.hasOwnProperty.call(h,f)},u.p="",u(u.s=2)}([function(s,c,u){var h=this&&this.__extends||function(){var w=function(m,_){return w=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(x,N){x.__proto__=N}||function(x,N){for(var U in N)N.hasOwnProperty(U)&&(x[U]=N[U])},w(m,_)};return function(m,_){w(m,_);function x(){this.constructor=m}m.prototype=_===null?Object.create(_):(x.prototype=_.prototype,new x)}}();Object.defineProperty(c,"__esModule",{value:!0});var f=256,y=function(){function w(m){m===void 0&&(m="="),this._paddingCharacter=m}return w.prototype.encodedLength=function(m){return this._paddingCharacter?(m+2)/3*4|0:(m*8+5)/6|0},w.prototype.encode=function(m){for(var _="",x=0;x<m.length-2;x+=3){var N=m[x]<<16|m[x+1]<<8|m[x+2];_+=this._encodeByte(N>>>3*6&63),_+=this._encodeByte(N>>>2*6&63),_+=this._encodeByte(N>>>1*6&63),_+=this._encodeByte(N>>>0*6&63)}var U=m.length-x;if(U>0){var N=m[x]<<16|(U===2?m[x+1]<<8:0);_+=this._encodeByte(N>>>3*6&63),_+=this._encodeByte(N>>>2*6&63),U===2?_+=this._encodeByte(N>>>1*6&63):_+=this._paddingCharacter||"",_+=this._paddingCharacter||""}return _},w.prototype.maxDecodedLength=function(m){return this._paddingCharacter?m/4*3|0:(m*6+7)/8|0},w.prototype.decodedLength=function(m){return this.maxDecodedLength(m.length-this._getPaddingLength(m))},w.prototype.decode=function(m){if(m.length===0)return new Uint8Array(0);for(var _=this._getPaddingLength(m),x=m.length-_,N=new Uint8Array(this.maxDecodedLength(x)),U=0,H=0,W=0,Q=0,V=0,X=0,$=0;H<x-4;H+=4)Q=this._decodeChar(m.charCodeAt(H+0)),V=this._decodeChar(m.charCodeAt(H+1)),X=this._decodeChar(m.charCodeAt(H+2)),$=this._decodeChar(m.charCodeAt(H+3)),N[U++]=Q<<2|V>>>4,N[U++]=V<<4|X>>>2,N[U++]=X<<6|$,W|=Q&f,W|=V&f,W|=X&f,W|=$&f;if(H<x-1&&(Q=this._decodeChar(m.charCodeAt(H)),V=this._decodeChar(m.charCodeAt(H+1)),N[U++]=Q<<2|V>>>4,W|=Q&f,W|=V&f),H<x-2&&(X=this._decodeChar(m.charCodeAt(H+2)),N[U++]=V<<4|X>>>2,W|=X&f),H<x-3&&($=this._decodeChar(m.charCodeAt(H+3)),N[U++]=X<<6|$,W|=$&f),W!==0)throw new Error("Base64Coder: incorrect characters for decoding");return N},w.prototype._encodeByte=function(m){var _=m;return _+=65,_+=25-m>>>8&0-65-26+97,_+=51-m>>>8&26-97-52+48,_+=61-m>>>8&52-48-62+43,_+=62-m>>>8&62-43-63+47,String.fromCharCode(_)},w.prototype._decodeChar=function(m){var _=f;return _+=(42-m&m-44)>>>8&-f+m-43+62,_+=(46-m&m-48)>>>8&-f+m-47+63,_+=(47-m&m-58)>>>8&-f+m-48+52,_+=(64-m&m-91)>>>8&-f+m-65+0,_+=(96-m&m-123)>>>8&-f+m-97+26,_},w.prototype._getPaddingLength=function(m){var _=0;if(this._paddingCharacter){for(var x=m.length-1;x>=0&&m[x]===this._paddingCharacter;x--)_++;if(m.length<4||_>2)throw new Error("Base64Coder: incorrect padding")}return _},w}();c.Coder=y;var b=new y;function v(w){return b.encode(w)}c.encode=v;function S(w){return b.decode(w)}c.decode=S;var T=function(w){h(m,w);function m(){return w!==null&&w.apply(this,arguments)||this}return m.prototype._encodeByte=function(_){var x=_;return x+=65,x+=25-_>>>8&0-65-26+97,x+=51-_>>>8&26-97-52+48,x+=61-_>>>8&52-48-62+45,x+=62-_>>>8&62-45-63+95,String.fromCharCode(x)},m.prototype._decodeChar=function(_){var x=f;return x+=(44-_&_-46)>>>8&-f+_-45+62,x+=(94-_&_-96)>>>8&-f+_-95+63,x+=(47-_&_-58)>>>8&-f+_-48+52,x+=(64-_&_-91)>>>8&-f+_-65+0,x+=(96-_&_-123)>>>8&-f+_-97+26,x},m}(y);c.URLSafeCoder=T;var O=new T;function P(w){return O.encode(w)}c.encodeURLSafe=P;function k(w){return O.decode(w)}c.decodeURLSafe=k,c.encodedLength=function(w){return b.encodedLength(w)},c.maxDecodedLength=function(w){return b.maxDecodedLength(w)},c.decodedLength=function(w){return b.decodedLength(w)}},function(s,c,u){Object.defineProperty(c,"__esModule",{value:!0});var h="utf8: invalid string",f="utf8: invalid source encoding";function y(S){for(var T=new Uint8Array(b(S)),O=0,P=0;P<S.length;P++){var k=S.charCodeAt(P);k<128?T[O++]=k:k<2048?(T[O++]=192|k>>6,T[O++]=128|k&63):k<55296?(T[O++]=224|k>>12,T[O++]=128|k>>6&63,T[O++]=128|k&63):(P++,k=(k&1023)<<10,k|=S.charCodeAt(P)&1023,k+=65536,T[O++]=240|k>>18,T[O++]=128|k>>12&63,T[O++]=128|k>>6&63,T[O++]=128|k&63)}return T}c.encode=y;function b(S){for(var T=0,O=0;O<S.length;O++){var P=S.charCodeAt(O);if(P<128)T+=1;else if(P<2048)T+=2;else if(P<55296)T+=3;else if(P<=57343){if(O>=S.length-1)throw new Error(h);O++,T+=4}else throw new Error(h)}return T}c.encodedLength=b;function v(S){for(var T=[],O=0;O<S.length;O++){var P=S[O];if(P&128){var k=void 0;if(P<224){if(O>=S.length)throw new Error(f);var w=S[++O];if((w&192)!==128)throw new Error(f);P=(P&31)<<6|w&63,k=128}else if(P<240){if(O>=S.length-1)throw new Error(f);var w=S[++O],m=S[++O];if((w&192)!==128||(m&192)!==128)throw new Error(f);P=(P&15)<<12|(w&63)<<6|m&63,k=2048}else if(P<248){if(O>=S.length-2)throw new Error(f);var w=S[++O],m=S[++O],_=S[++O];if((w&192)!==128||(m&192)!==128||(_&192)!==128)throw new Error(f);P=(P&15)<<18|(w&63)<<12|(m&63)<<6|_&63,k=65536}else throw new Error(f);if(P<k||P>=55296&&P<=57343)throw new Error(f);if(P>=65536){if(P>1114111)throw new Error(f);P-=65536,T.push(String.fromCharCode(55296|P>>10)),P=56320|P&1023}}T.push(String.fromCharCode(P))}return T.join("")}c.decode=v},function(s,c,u){s.exports=u(3).default},function(s,c,u){u.r(c);var h=function(){function e(t,n){this.lastId=0,this.prefix=t,this.name=n}return e.prototype.create=function(t){this.lastId++;var n=this.lastId,r=this.prefix+n,a=this.name+"["+n+"]",l=!1,p=function(){l||(t.apply(null,arguments),l=!0)};return this[n]=p,{number:n,id:r,name:a,callback:p}},e.prototype.remove=function(t){delete this[t.number]},e}(),f=new h("_pusher_script_","Pusher.ScriptReceivers"),y={VERSION:"8.0.1",PROTOCOL:7,wsPort:80,wssPort:443,wsPath:"",httpHost:"sockjs.pusher.com",httpPort:80,httpsPort:443,httpPath:"/pusher",stats_host:"stats.pusher.com",authEndpoint:"/pusher/auth",authTransport:"ajax",activityTimeout:12e4,pongTimeout:3e4,unavailableTimeout:1e4,userAuthentication:{endpoint:"/pusher/user-auth",transport:"ajax"},channelAuthorization:{endpoint:"/pusher/auth",transport:"ajax"},cdn_http:"http://js.pusher.com",cdn_https:"https://js.pusher.com",dependency_suffix:""},b=y,v=function(){function e(t){this.options=t,this.receivers=t.receivers||f,this.loading={}}return e.prototype.load=function(t,n,r){var a=this;if(a.loading[t]&&a.loading[t].length>0)a.loading[t].push(r);else{a.loading[t]=[r];var l=A.createScriptRequest(a.getPath(t,n)),p=a.receivers.create(function(g){if(a.receivers.remove(p),a.loading[t]){var E=a.loading[t];delete a.loading[t];for(var C=function(I){I||l.cleanup()},R=0;R<E.length;R++)E[R](g,C)}});l.send(p)}},e.prototype.getRoot=function(t){var n,r=A.getDocument().location.protocol;return t&&t.useTLS||r==="https:"?n=this.options.cdn_https:n=this.options.cdn_http,n.replace(/\/*$/,"")+"/"+this.options.version},e.prototype.getPath=function(t,n){return this.getRoot(n)+"/"+t+this.options.suffix+".js"},e}(),S=v,T=new h("_pusher_dependencies","Pusher.DependenciesReceivers"),O=new S({cdn_http:b.cdn_http,cdn_https:b.cdn_https,version:b.VERSION,suffix:b.dependency_suffix,receivers:T}),P={baseUrl:"https://pusher.com",urls:{authenticationEndpoint:{path:"/docs/channels/server_api/authenticating_users"},authorizationEndpoint:{path:"/docs/channels/server_api/authorizing-users/"},javascriptQuickStart:{path:"/docs/javascript_quick_start"},triggeringClientEvents:{path:"/docs/client_api_guide/client_events#trigger-events"},encryptedChannelSupport:{fullUrl:"https://github.com/pusher/pusher-js/tree/cc491015371a4bde5743d1c87a0fbac0feb53195#encrypted-channel-support"}}},k=function(e){var t="See:",n=P.urls[e];if(!n)return"";var r;return n.fullUrl?r=n.fullUrl:n.path&&(r=P.baseUrl+n.path),r?t+" "+r:""},w={buildLogSuffix:k},m;(function(e){e.UserAuthentication="user-authentication",e.ChannelAuthorization="channel-authorization"})(m||(m={}));var _=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,a){r.__proto__=a}||function(r,a){for(var l in a)a.hasOwnProperty(l)&&(r[l]=a[l])},e(t,n)};return function(t,n){e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),x=function(e){_(t,e);function t(n){var r=this.constructor,a=e.call(this,n)||this;return Object.setPrototypeOf(a,r.prototype),a}return t}(Error),N=function(e){_(t,e);function t(n){var r=this.constructor,a=e.call(this,n)||this;return Object.setPrototypeOf(a,r.prototype),a}return t}(Error),U=function(e){_(t,e);function t(n){var r=this.constructor,a=e.call(this,n)||this;return Object.setPrototypeOf(a,r.prototype),a}return t}(Error),H=function(e){_(t,e);function t(n){var r=this.constructor,a=e.call(this,n)||this;return Object.setPrototypeOf(a,r.prototype),a}return t}(Error),W=function(e){_(t,e);function t(n){var r=this.constructor,a=e.call(this,n)||this;return Object.setPrototypeOf(a,r.prototype),a}return t}(Error),Q=function(e){_(t,e);function t(n){var r=this.constructor,a=e.call(this,n)||this;return Object.setPrototypeOf(a,r.prototype),a}return t}(Error),V=function(e){_(t,e);function t(n){var r=this.constructor,a=e.call(this,n)||this;return Object.setPrototypeOf(a,r.prototype),a}return t}(Error),X=function(e){_(t,e);function t(n){var r=this.constructor,a=e.call(this,n)||this;return Object.setPrototypeOf(a,r.prototype),a}return t}(Error),$=function(e){_(t,e);function t(n,r){var a=this.constructor,l=e.call(this,r)||this;return l.status=n,Object.setPrototypeOf(l,a.prototype),l}return t}(Error),Rn=function(e,t,n,r,a){var l=A.createXHR();l.open("POST",n.endpoint,!0),l.setRequestHeader("Content-Type","application/x-www-form-urlencoded");for(var p in n.headers)l.setRequestHeader(p,n.headers[p]);if(n.headersProvider!=null){var g=n.headersProvider();for(var p in g)l.setRequestHeader(p,g[p])}return l.onreadystatechange=function(){if(l.readyState===4)if(l.status===200){var E=void 0,C=!1;try{E=JSON.parse(l.responseText),C=!0}catch{a(new $(200,"JSON returned from "+r.toString()+" endpoint was invalid, yet status code was 200. Data was: "+l.responseText),null)}C&&a(null,E)}else{var R="";switch(r){case m.UserAuthentication:R=w.buildLogSuffix("authenticationEndpoint");break;case m.ChannelAuthorization:R="Clients must be authorized to join private or presence channels. "+w.buildLogSuffix("authorizationEndpoint");break}a(new $(l.status,"Unable to retrieve auth string from "+r.toString()+" endpoint - "+("received status: "+l.status+" from "+n.endpoint+". "+R)),null)}},l.send(t),l},Ln=Rn;function Nn(e){return Un(In(e))}var pt=String.fromCharCode,wt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",jn=function(e){var t=e.charCodeAt(0);return t<128?e:t<2048?pt(192|t>>>6)+pt(128|t&63):pt(224|t>>>12&15)+pt(128|t>>>6&63)+pt(128|t&63)},In=function(e){return e.replace(/[^\x00-\x7F]/g,jn)},Dn=function(e){var t=[0,2,1][e.length%3],n=e.charCodeAt(0)<<16|(e.length>1?e.charCodeAt(1):0)<<8|(e.length>2?e.charCodeAt(2):0),r=[wt.charAt(n>>>18),wt.charAt(n>>>12&63),t>=2?"=":wt.charAt(n>>>6&63),t>=1?"=":wt.charAt(n&63)];return r.join("")},Un=window.btoa||function(e){return e.replace(/[\s\S]{1,3}/g,Dn)},Fn=function(){function e(t,n,r,a){var l=this;this.clear=n,this.timer=t(function(){l.timer&&(l.timer=a(l.timer))},r)}return e.prototype.isRunning=function(){return this.timer!==null},e.prototype.ensureAborted=function(){this.timer&&(this.clear(this.timer),this.timer=null)},e}(),me=Fn,ge=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,a){r.__proto__=a}||function(r,a){for(var l in a)a.hasOwnProperty(l)&&(r[l]=a[l])},e(t,n)};return function(t,n){e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}();function qn(e){window.clearTimeout(e)}function Bn(e){window.clearInterval(e)}var ot=function(e){ge(t,e);function t(n,r){return e.call(this,setTimeout,qn,n,function(a){return r(),null})||this}return t}(me),Hn=function(e){ge(t,e);function t(n,r){return e.call(this,setInterval,Bn,n,function(a){return r(),a})||this}return t}(me),Mn={now:function(){return Date.now?Date.now():new Date().valueOf()},defer:function(e){return new ot(0,e)},method:function(e){var t=Array.prototype.slice.call(arguments,1);return function(n){return n[e].apply(n,t.concat(arguments))}}},B=Mn;function M(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var r=0;r<t.length;r++){var a=t[r];for(var l in a)a[l]&&a[l].constructor&&a[l].constructor===Object?e[l]=M(e[l]||{},a[l]):e[l]=a[l]}return e}function zn(){for(var e=["Pusher"],t=0;t<arguments.length;t++)typeof arguments[t]=="string"?e.push(arguments[t]):e.push(St(arguments[t]));return e.join(" : ")}function be(e,t){var n=Array.prototype.indexOf;if(e===null)return-1;if(n&&e.indexOf===n)return e.indexOf(t);for(var r=0,a=e.length;r<a;r++)if(e[r]===t)return r;return-1}function Y(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(e[n],n,e)}function _e(e){var t=[];return Y(e,function(n,r){t.push(r)}),t}function Jn(e){var t=[];return Y(e,function(n){t.push(n)}),t}function dt(e,t,n){for(var r=0;r<e.length;r++)t.call(n||window,e[r],r,e)}function we(e,t){for(var n=[],r=0;r<e.length;r++)n.push(t(e[r],r,e,n));return n}function Wn(e,t){var n={};return Y(e,function(r,a){n[a]=t(r)}),n}function Se(e,t){t=t||function(a){return!!a};for(var n=[],r=0;r<e.length;r++)t(e[r],r,e,n)&&n.push(e[r]);return n}function ke(e,t){var n={};return Y(e,function(r,a){(t&&t(r,a,e,n)||Boolean(r))&&(n[a]=r)}),n}function Xn(e){var t=[];return Y(e,function(n,r){t.push([r,n])}),t}function Ce(e,t){for(var n=0;n<e.length;n++)if(t(e[n],n,e))return!0;return!1}function Vn(e,t){for(var n=0;n<e.length;n++)if(!t(e[n],n,e))return!1;return!0}function $n(e){return Wn(e,function(t){return typeof t=="object"&&(t=St(t)),encodeURIComponent(Nn(t.toString()))})}function Gn(e){var t=ke(e,function(r){return r!==void 0}),n=we(Xn($n(t)),B.method("join","=")).join("&");return n}function Kn(e){var t=[],n=[];return function r(a,l){var p,g,E;switch(typeof a){case"object":if(!a)return null;for(p=0;p<t.length;p+=1)if(t[p]===a)return{$ref:n[p]};if(t.push(a),n.push(l),Object.prototype.toString.apply(a)==="[object Array]")for(E=[],p=0;p<a.length;p+=1)E[p]=r(a[p],l+"["+p+"]");else{E={};for(g in a)Object.prototype.hasOwnProperty.call(a,g)&&(E[g]=r(a[g],l+"["+JSON.stringify(g)+"]"))}return E;case"number":case"string":case"boolean":return a}}(e,"$")}function St(e){try{return JSON.stringify(e)}catch{return JSON.stringify(Kn(e))}}var Qn=function(){function e(){this.globalLog=function(t){window.console&&window.console.log&&window.console.log(t)}}return e.prototype.debug=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this.log(this.globalLog,t)},e.prototype.warn=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this.log(this.globalLogWarn,t)},e.prototype.error=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this.log(this.globalLogError,t)},e.prototype.globalLogWarn=function(t){window.console&&window.console.warn?window.console.warn(t):this.globalLog(t)},e.prototype.globalLogError=function(t){window.console&&window.console.error?window.console.error(t):this.globalLogWarn(t)},e.prototype.log=function(t){var n=zn.apply(this,arguments);if($t.log)$t.log(n);else if($t.logToConsole){var r=t.bind(this);r(n)}},e}(),j=new Qn,Yn=function(e,t,n,r,a){(n.headers!==void 0||n.headersProvider!=null)&&j.warn("To send headers with the "+r.toString()+" request, you must use AJAX, rather than JSONP.");var l=e.nextAuthCallbackID.toString();e.nextAuthCallbackID++;var p=e.getDocument(),g=p.createElement("script");e.auth_callbacks[l]=function(R){a(null,R)};var E="Pusher.auth_callbacks['"+l+"']";g.src=n.endpoint+"?callback="+encodeURIComponent(E)+"&"+t;var C=p.getElementsByTagName("head")[0]||p.documentElement;C.insertBefore(g,C.firstChild)},Zn=Yn,tr=function(){function e(t){this.src=t}return e.prototype.send=function(t){var n=this,r="Error loading "+n.src;n.script=document.createElement("script"),n.script.id=t.id,n.script.src=n.src,n.script.type="text/javascript",n.script.charset="UTF-8",n.script.addEventListener?(n.script.onerror=function(){t.callback(r)},n.script.onload=function(){t.callback(null)}):n.script.onreadystatechange=function(){(n.script.readyState==="loaded"||n.script.readyState==="complete")&&t.callback(null)},n.script.async===void 0&&document.attachEvent&&/opera/i.test(navigator.userAgent)?(n.errorScript=document.createElement("script"),n.errorScript.id=t.id+"_error",n.errorScript.text=t.name+"('"+r+"');",n.script.async=n.errorScript.async=!1):n.script.async=!0;var a=document.getElementsByTagName("head")[0];a.insertBefore(n.script,a.firstChild),n.errorScript&&a.insertBefore(n.errorScript,n.script.nextSibling)},e.prototype.cleanup=function(){this.script&&(this.script.onload=this.script.onerror=null,this.script.onreadystatechange=null),this.script&&this.script.parentNode&&this.script.parentNode.removeChild(this.script),this.errorScript&&this.errorScript.parentNode&&this.errorScript.parentNode.removeChild(this.errorScript),this.script=null,this.errorScript=null},e}(),er=tr,nr=function(){function e(t,n){this.url=t,this.data=n}return e.prototype.send=function(t){if(!this.request){var n=Gn(this.data),r=this.url+"/"+t.number+"?"+n;this.request=A.createScriptRequest(r),this.request.send(t)}},e.prototype.cleanup=function(){this.request&&this.request.cleanup()},e}(),rr=nr,ir=function(e,t){return function(n,r){var a="http"+(t?"s":"")+"://",l=a+(e.host||e.options.host)+e.options.path,p=A.createJSONPRequest(l,n),g=A.ScriptReceivers.create(function(E,C){f.remove(g),p.cleanup(),C&&C.host&&(e.host=C.host),r&&r(E,C)});p.send(g)}},or={name:"jsonp",getAgent:ir},sr=or;function Ft(e,t,n){var r=e+(t.useTLS?"s":""),a=t.useTLS?t.hostTLS:t.hostNonTLS;return r+"://"+a+n}function qt(e,t){var n="/app/"+e,r="?protocol="+b.PROTOCOL+"&client=js&version="+b.VERSION+(t?"&"+t:"");return n+r}var ar={getInitial:function(e,t){var n=(t.httpPath||"")+qt(e,"flash=false");return Ft("ws",t,n)}},cr={getInitial:function(e,t){var n=(t.httpPath||"/pusher")+qt(e);return Ft("http",t,n)}},ur={getInitial:function(e,t){return Ft("http",t,t.httpPath||"/pusher")},getPath:function(e,t){return qt(e)}},lr=function(){function e(){this._callbacks={}}return e.prototype.get=function(t){return this._callbacks[Bt(t)]},e.prototype.add=function(t,n,r){var a=Bt(t);this._callbacks[a]=this._callbacks[a]||[],this._callbacks[a].push({fn:n,context:r})},e.prototype.remove=function(t,n,r){if(!t&&!n&&!r){this._callbacks={};return}var a=t?[Bt(t)]:_e(this._callbacks);n||r?this.removeCallback(a,n,r):this.removeAllCallbacks(a)},e.prototype.removeCallback=function(t,n,r){dt(t,function(a){this._callbacks[a]=Se(this._callbacks[a]||[],function(l){return n&&n!==l.fn||r&&r!==l.context}),this._callbacks[a].length===0&&delete this._callbacks[a]},this)},e.prototype.removeAllCallbacks=function(t){dt(t,function(n){delete this._callbacks[n]},this)},e}(),hr=lr;function Bt(e){return"_"+e}var fr=function(){function e(t){this.callbacks=new hr,this.global_callbacks=[],this.failThrough=t}return e.prototype.bind=function(t,n,r){return this.callbacks.add(t,n,r),this},e.prototype.bind_global=function(t){return this.global_callbacks.push(t),this},e.prototype.unbind=function(t,n,r){return this.callbacks.remove(t,n,r),this},e.prototype.unbind_global=function(t){return t?(this.global_callbacks=Se(this.global_callbacks||[],function(n){return n!==t}),this):(this.global_callbacks=[],this)},e.prototype.unbind_all=function(){return this.unbind(),this.unbind_global(),this},e.prototype.emit=function(t,n,r){for(var a=0;a<this.global_callbacks.length;a++)this.global_callbacks[a](t,n);var l=this.callbacks.get(t),p=[];if(r?p.push(n,r):n&&p.push(n),l&&l.length>0)for(var a=0;a<l.length;a++)l[a].fn.apply(l[a].context||window,p);else this.failThrough&&this.failThrough(t,n);return this},e}(),Z=fr,pr=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,a){r.__proto__=a}||function(r,a){for(var l in a)a.hasOwnProperty(l)&&(r[l]=a[l])},e(t,n)};return function(t,n){e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),dr=function(e){pr(t,e);function t(n,r,a,l,p){var g=e.call(this)||this;return g.initialize=A.transportConnectionInitializer,g.hooks=n,g.name=r,g.priority=a,g.key=l,g.options=p,g.state="new",g.timeline=p.timeline,g.activityTimeout=p.activityTimeout,g.id=g.timeline.generateUniqueID(),g}return t.prototype.handlesActivityChecks=function(){return Boolean(this.hooks.handlesActivityChecks)},t.prototype.supportsPing=function(){return Boolean(this.hooks.supportsPing)},t.prototype.connect=function(){var n=this;if(this.socket||this.state!=="initialized")return!1;var r=this.hooks.urls.getInitial(this.key,this.options);try{this.socket=this.hooks.getSocket(r,this.options)}catch(a){return B.defer(function(){n.onError(a),n.changeState("closed")}),!1}return this.bindListeners(),j.debug("Connecting",{transport:this.name,url:r}),this.changeState("connecting"),!0},t.prototype.close=function(){return this.socket?(this.socket.close(),!0):!1},t.prototype.send=function(n){var r=this;return this.state==="open"?(B.defer(function(){r.socket&&r.socket.send(n)}),!0):!1},t.prototype.ping=function(){this.state==="open"&&this.supportsPing()&&this.socket.ping()},t.prototype.onOpen=function(){this.hooks.beforeOpen&&this.hooks.beforeOpen(this.socket,this.hooks.urls.getPath(this.key,this.options)),this.changeState("open"),this.socket.onopen=void 0},t.prototype.onError=function(n){this.emit("error",{type:"WebSocketError",error:n}),this.timeline.error(this.buildTimelineMessage({error:n.toString()}))},t.prototype.onClose=function(n){n?this.changeState("closed",{code:n.code,reason:n.reason,wasClean:n.wasClean}):this.changeState("closed"),this.unbindListeners(),this.socket=void 0},t.prototype.onMessage=function(n){this.emit("message",n)},t.prototype.onActivity=function(){this.emit("activity")},t.prototype.bindListeners=function(){var n=this;this.socket.onopen=function(){n.onOpen()},this.socket.onerror=function(r){n.onError(r)},this.socket.onclose=function(r){n.onClose(r)},this.socket.onmessage=function(r){n.onMessage(r)},this.supportsPing()&&(this.socket.onactivity=function(){n.onActivity()})},t.prototype.unbindListeners=function(){this.socket&&(this.socket.onopen=void 0,this.socket.onerror=void 0,this.socket.onclose=void 0,this.socket.onmessage=void 0,this.supportsPing()&&(this.socket.onactivity=void 0))},t.prototype.changeState=function(n,r){this.state=n,this.timeline.info(this.buildTimelineMessage({state:n,params:r})),this.emit(n,r)},t.prototype.buildTimelineMessage=function(n){return M({cid:this.id},n)},t}(Z),yr=dr,vr=function(){function e(t){this.hooks=t}return e.prototype.isSupported=function(t){return this.hooks.isSupported(t)},e.prototype.createConnection=function(t,n,r,a){return new yr(this.hooks,t,n,r,a)},e}(),ut=vr,mr=new ut({urls:ar,handlesActivityChecks:!1,supportsPing:!1,isInitialized:function(){return Boolean(A.getWebSocketAPI())},isSupported:function(){return Boolean(A.getWebSocketAPI())},getSocket:function(e){return A.createWebSocket(e)}}),Te={urls:cr,handlesActivityChecks:!1,supportsPing:!0,isInitialized:function(){return!0}},Pe=M({getSocket:function(e){return A.HTTPFactory.createStreamingSocket(e)}},Te),Oe=M({getSocket:function(e){return A.HTTPFactory.createPollingSocket(e)}},Te),Ee={isSupported:function(){return A.isXHRSupported()}},gr=new ut(M({},Pe,Ee)),br=new ut(M({},Oe,Ee)),_r={ws:mr,xhr_streaming:gr,xhr_polling:br},kt=_r,wr=new ut({file:"sockjs",urls:ur,handlesActivityChecks:!0,supportsPing:!1,isSupported:function(){return!0},isInitialized:function(){return window.SockJS!==void 0},getSocket:function(e,t){return new window.SockJS(e,null,{js_path:O.getPath("sockjs",{useTLS:t.useTLS}),ignore_null_origin:t.ignoreNullOrigin})},beforeOpen:function(e,t){e.send(JSON.stringify({path:t}))}}),xe={isSupported:function(e){var t=A.isXDRSupported(e.useTLS);return t}},Sr=new ut(M({},Pe,xe)),kr=new ut(M({},Oe,xe));kt.xdr_streaming=Sr,kt.xdr_polling=kr,kt.sockjs=wr;var Cr=kt,Tr=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,a){r.__proto__=a}||function(r,a){for(var l in a)a.hasOwnProperty(l)&&(r[l]=a[l])},e(t,n)};return function(t,n){e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Pr=function(e){Tr(t,e);function t(){var n=e.call(this)||this,r=n;return window.addEventListener!==void 0&&(window.addEventListener("online",function(){r.emit("online")},!1),window.addEventListener("offline",function(){r.emit("offline")},!1)),n}return t.prototype.isOnline=function(){return window.navigator.onLine===void 0?!0:window.navigator.onLine},t}(Z),Or=new Pr,Er=function(){function e(t,n,r){this.manager=t,this.transport=n,this.minPingDelay=r.minPingDelay,this.maxPingDelay=r.maxPingDelay,this.pingDelay=void 0}return e.prototype.createConnection=function(t,n,r,a){var l=this;a=M({},a,{activityTimeout:this.pingDelay});var p=this.transport.createConnection(t,n,r,a),g=null,E=function(){p.unbind("open",E),p.bind("closed",C),g=B.now()},C=function(R){if(p.unbind("closed",C),R.code===1002||R.code===1003)l.manager.reportDeath();else if(!R.wasClean&&g){var I=B.now()-g;I<2*l.maxPingDelay&&(l.manager.reportDeath(),l.pingDelay=Math.max(I/2,l.minPingDelay))}};return p.bind("open",E),p},e.prototype.isSupported=function(t){return this.manager.isAlive()&&this.transport.isSupported(t)},e}(),xr=Er,Ae={decodeMessage:function(e){try{var t=JSON.parse(e.data),n=t.data;if(typeof n=="string")try{n=JSON.parse(t.data)}catch{}var r={event:t.event,channel:t.channel,data:n};return t.user_id&&(r.user_id=t.user_id),r}catch(a){throw{type:"MessageParseError",error:a,data:e.data}}},encodeMessage:function(e){return JSON.stringify(e)},processHandshake:function(e){var t=Ae.decodeMessage(e);if(t.event==="pusher:connection_established"){if(!t.data.activity_timeout)throw"No activity timeout specified in handshake";return{action:"connected",id:t.data.socket_id,activityTimeout:t.data.activity_timeout*1e3}}else{if(t.event==="pusher:error")return{action:this.getCloseAction(t.data),error:this.getCloseError(t.data)};throw"Invalid handshake"}},getCloseAction:function(e){return e.code<4e3?e.code>=1002&&e.code<=1004?"backoff":null:e.code===4e3?"tls_only":e.code<4100?"refused":e.code<4200?"backoff":e.code<4300?"retry":"refused"},getCloseError:function(e){return e.code!==1e3&&e.code!==1001?{type:"PusherError",data:{code:e.code,message:e.reason||e.message}}:null}},st=Ae,Ar=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,a){r.__proto__=a}||function(r,a){for(var l in a)a.hasOwnProperty(l)&&(r[l]=a[l])},e(t,n)};return function(t,n){e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Rr=function(e){Ar(t,e);function t(n,r){var a=e.call(this)||this;return a.id=n,a.transport=r,a.activityTimeout=r.activityTimeout,a.bindListeners(),a}return t.prototype.handlesActivityChecks=function(){return this.transport.handlesActivityChecks()},t.prototype.send=function(n){return this.transport.send(n)},t.prototype.send_event=function(n,r,a){var l={event:n,data:r};return a&&(l.channel=a),j.debug("Event sent",l),this.send(st.encodeMessage(l))},t.prototype.ping=function(){this.transport.supportsPing()?this.transport.ping():this.send_event("pusher:ping",{})},t.prototype.close=function(){this.transport.close()},t.prototype.bindListeners=function(){var n=this,r={message:function(l){var p;try{p=st.decodeMessage(l)}catch(g){n.emit("error",{type:"MessageParseError",error:g,data:l.data})}if(p!==void 0){switch(j.debug("Event recd",p),p.event){case"pusher:error":n.emit("error",{type:"PusherError",data:p.data});break;case"pusher:ping":n.emit("ping");break;case"pusher:pong":n.emit("pong");break}n.emit("message",p)}},activity:function(){n.emit("activity")},error:function(l){n.emit("error",l)},closed:function(l){a(),l&&l.code&&n.handleCloseEvent(l),n.transport=null,n.emit("closed")}},a=function(){Y(r,function(l,p){n.transport.unbind(p,l)})};Y(r,function(l,p){n.transport.bind(p,l)})},t.prototype.handleCloseEvent=function(n){var r=st.getCloseAction(n),a=st.getCloseError(n);a&&this.emit("error",a),r&&this.emit(r,{action:r,error:a})},t}(Z),Lr=Rr,Nr=function(){function e(t,n){this.transport=t,this.callback=n,this.bindListeners()}return e.prototype.close=function(){this.unbindListeners(),this.transport.close()},e.prototype.bindListeners=function(){var t=this;this.onMessage=function(n){t.unbindListeners();var r;try{r=st.processHandshake(n)}catch(a){t.finish("error",{error:a}),t.transport.close();return}r.action==="connected"?t.finish("connected",{connection:new Lr(r.id,t.transport),activityTimeout:r.activityTimeout}):(t.finish(r.action,{error:r.error}),t.transport.close())},this.onClosed=function(n){t.unbindListeners();var r=st.getCloseAction(n)||"backoff",a=st.getCloseError(n);t.finish(r,{error:a})},this.transport.bind("message",this.onMessage),this.transport.bind("closed",this.onClosed)},e.prototype.unbindListeners=function(){this.transport.unbind("message",this.onMessage),this.transport.unbind("closed",this.onClosed)},e.prototype.finish=function(t,n){this.callback(M({transport:this.transport,action:t},n))},e}(),jr=Nr,Ir=function(){function e(t,n){this.timeline=t,this.options=n||{}}return e.prototype.send=function(t,n){this.timeline.isEmpty()||this.timeline.send(A.TimelineTransport.getAgent(this,t),n)},e}(),Dr=Ir,Ur=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,a){r.__proto__=a}||function(r,a){for(var l in a)a.hasOwnProperty(l)&&(r[l]=a[l])},e(t,n)};return function(t,n){e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Fr=function(e){Ur(t,e);function t(n,r){var a=e.call(this,function(l,p){j.debug("No callbacks on "+n+" for "+l)})||this;return a.name=n,a.pusher=r,a.subscribed=!1,a.subscriptionPending=!1,a.subscriptionCancelled=!1,a}return t.prototype.authorize=function(n,r){return r(null,{auth:""})},t.prototype.trigger=function(n,r){if(n.indexOf("client-")!==0)throw new x("Event '"+n+"' does not start with 'client-'");if(!this.subscribed){var a=w.buildLogSuffix("triggeringClientEvents");j.warn("Client event triggered before channel 'subscription_succeeded' event . "+a)}return this.pusher.send_event(n,r,this.name)},t.prototype.disconnect=function(){this.subscribed=!1,this.subscriptionPending=!1},t.prototype.handleEvent=function(n){var r=n.event,a=n.data;if(r==="pusher_internal:subscription_succeeded")this.handleSubscriptionSucceededEvent(n);else if(r==="pusher_internal:subscription_count")this.handleSubscriptionCountEvent(n);else if(r.indexOf("pusher_internal:")!==0){var l={};this.emit(r,a,l)}},t.prototype.handleSubscriptionSucceededEvent=function(n){this.subscriptionPending=!1,this.subscribed=!0,this.subscriptionCancelled?this.pusher.unsubscribe(this.name):this.emit("pusher:subscription_succeeded",n.data)},t.prototype.handleSubscriptionCountEvent=function(n){n.data.subscription_count&&(this.subscriptionCount=n.data.subscription_count),this.emit("pusher:subscription_count",n.data)},t.prototype.subscribe=function(){var n=this;this.subscribed||(this.subscriptionPending=!0,this.subscriptionCancelled=!1,this.authorize(this.pusher.connection.socket_id,function(r,a){r?(n.subscriptionPending=!1,j.error(r.toString()),n.emit("pusher:subscription_error",Object.assign({},{type:"AuthError",error:r.message},r instanceof $?{status:r.status}:{}))):n.pusher.send_event("pusher:subscribe",{auth:a.auth,channel_data:a.channel_data,channel:n.name})}))},t.prototype.unsubscribe=function(){this.subscribed=!1,this.pusher.send_event("pusher:unsubscribe",{channel:this.name})},t.prototype.cancelSubscription=function(){this.subscriptionCancelled=!0},t.prototype.reinstateSubscription=function(){this.subscriptionCancelled=!1},t}(Z),Ht=Fr,qr=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,a){r.__proto__=a}||function(r,a){for(var l in a)a.hasOwnProperty(l)&&(r[l]=a[l])},e(t,n)};return function(t,n){e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Br=function(e){qr(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.authorize=function(n,r){return this.pusher.config.channelAuthorizer({channelName:this.name,socketId:n},r)},t}(Ht),Mt=Br,Hr=function(){function e(){this.reset()}return e.prototype.get=function(t){return Object.prototype.hasOwnProperty.call(this.members,t)?{id:t,info:this.members[t]}:null},e.prototype.each=function(t){var n=this;Y(this.members,function(r,a){t(n.get(a))})},e.prototype.setMyID=function(t){this.myID=t},e.prototype.onSubscription=function(t){this.members=t.presence.hash,this.count=t.presence.count,this.me=this.get(this.myID)},e.prototype.addMember=function(t){return this.get(t.user_id)===null&&this.count++,this.members[t.user_id]=t.user_info,this.get(t.user_id)},e.prototype.removeMember=function(t){var n=this.get(t.user_id);return n&&(delete this.members[t.user_id],this.count--),n},e.prototype.reset=function(){this.members={},this.count=0,this.myID=null,this.me=null},e}(),Mr=Hr,zr=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,a){r.__proto__=a}||function(r,a){for(var l in a)a.hasOwnProperty(l)&&(r[l]=a[l])},e(t,n)};return function(t,n){e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Jr=function(e,t,n,r){function a(l){return l instanceof n?l:new n(function(p){p(l)})}return new(n||(n=Promise))(function(l,p){function g(R){try{C(r.next(R))}catch(I){p(I)}}function E(R){try{C(r.throw(R))}catch(I){p(I)}}function C(R){R.done?l(R.value):a(R.value).then(g,E)}C((r=r.apply(e,t||[])).next())})},Wr=function(e,t){var n={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},r,a,l,p;return p={next:g(0),throw:g(1),return:g(2)},typeof Symbol=="function"&&(p[Symbol.iterator]=function(){return this}),p;function g(C){return function(R){return E([C,R])}}function E(C){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,a&&(l=C[0]&2?a.return:C[0]?a.throw||((l=a.return)&&l.call(a),0):a.next)&&!(l=l.call(a,C[1])).done)return l;switch(a=0,l&&(C=[C[0]&2,l.value]),C[0]){case 0:case 1:l=C;break;case 4:return n.label++,{value:C[1],done:!1};case 5:n.label++,a=C[1],C=[0];continue;case 7:C=n.ops.pop(),n.trys.pop();continue;default:if(l=n.trys,!(l=l.length>0&&l[l.length-1])&&(C[0]===6||C[0]===2)){n=0;continue}if(C[0]===3&&(!l||C[1]>l[0]&&C[1]<l[3])){n.label=C[1];break}if(C[0]===6&&n.label<l[1]){n.label=l[1],l=C;break}if(l&&n.label<l[2]){n.label=l[2],n.ops.push(C);break}l[2]&&n.ops.pop(),n.trys.pop();continue}C=t.call(e,n)}catch(R){C=[6,R],a=0}finally{r=l=0}if(C[0]&5)throw C[1];return{value:C[0]?C[1]:void 0,done:!0}}},Xr=function(e){zr(t,e);function t(n,r){var a=e.call(this,n,r)||this;return a.members=new Mr,a}return t.prototype.authorize=function(n,r){var a=this;e.prototype.authorize.call(this,n,function(l,p){return Jr(a,void 0,void 0,function(){var g,E;return Wr(this,function(C){switch(C.label){case 0:return l?[3,3]:(p=p,p.channel_data==null?[3,1]:(g=JSON.parse(p.channel_data),this.members.setMyID(g.user_id),[3,3]));case 1:return[4,this.pusher.user.signinDonePromise];case 2:if(C.sent(),this.pusher.user.user_data!=null)this.members.setMyID(this.pusher.user.user_data.id);else return E=w.buildLogSuffix("authorizationEndpoint"),j.error("Invalid auth response for channel '"+this.name+"', "+("expected 'channel_data' field. "+E+", ")+"or the user should be signed in."),r("Invalid auth response"),[2];C.label=3;case 3:return r(l,p),[2]}})})})},t.prototype.handleEvent=function(n){var r=n.event;if(r.indexOf("pusher_internal:")===0)this.handleInternalEvent(n);else{var a=n.data,l={};n.user_id&&(l.user_id=n.user_id),this.emit(r,a,l)}},t.prototype.handleInternalEvent=function(n){var r=n.event,a=n.data;switch(r){case"pusher_internal:subscription_succeeded":this.handleSubscriptionSucceededEvent(n);break;case"pusher_internal:subscription_count":this.handleSubscriptionCountEvent(n);break;case"pusher_internal:member_added":var l=this.members.addMember(a);this.emit("pusher:member_added",l);break;case"pusher_internal:member_removed":var p=this.members.removeMember(a);p&&this.emit("pusher:member_removed",p);break}},t.prototype.handleSubscriptionSucceededEvent=function(n){this.subscriptionPending=!1,this.subscribed=!0,this.subscriptionCancelled?this.pusher.unsubscribe(this.name):(this.members.onSubscription(n.data),this.emit("pusher:subscription_succeeded",this.members))},t.prototype.disconnect=function(){this.members.reset(),e.prototype.disconnect.call(this)},t}(Mt),Vr=Xr,$r=u(1),zt=u(0),Gr=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,a){r.__proto__=a}||function(r,a){for(var l in a)a.hasOwnProperty(l)&&(r[l]=a[l])},e(t,n)};return function(t,n){e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Kr=function(e){Gr(t,e);function t(n,r,a){var l=e.call(this,n,r)||this;return l.key=null,l.nacl=a,l}return t.prototype.authorize=function(n,r){var a=this;e.prototype.authorize.call(this,n,function(l,p){if(l){r(l,p);return}var g=p.shared_secret;if(!g){r(new Error("No shared_secret key in auth payload for encrypted channel: "+a.name),null);return}a.key=Object(zt.decode)(g),delete p.shared_secret,r(null,p)})},t.prototype.trigger=function(n,r){throw new Q("Client events are not currently supported for encrypted channels")},t.prototype.handleEvent=function(n){var r=n.event,a=n.data;if(r.indexOf("pusher_internal:")===0||r.indexOf("pusher:")===0){e.prototype.handleEvent.call(this,n);return}this.handleEncryptedEvent(r,a)},t.prototype.handleEncryptedEvent=function(n,r){var a=this;if(!this.key){j.debug("Received encrypted event before key has been retrieved from the authEndpoint");return}if(!r.ciphertext||!r.nonce){j.error("Unexpected format for encrypted event, expected object with `ciphertext` and `nonce` fields, got: "+r);return}var l=Object(zt.decode)(r.ciphertext);if(l.length<this.nacl.secretbox.overheadLength){j.error("Expected encrypted event ciphertext length to be "+this.nacl.secretbox.overheadLength+", got: "+l.length);return}var p=Object(zt.decode)(r.nonce);if(p.length<this.nacl.secretbox.nonceLength){j.error("Expected encrypted event nonce length to be "+this.nacl.secretbox.nonceLength+", got: "+p.length);return}var g=this.nacl.secretbox.open(l,p,this.key);if(g===null){j.debug("Failed to decrypt an event, probably because it was encrypted with a different key. Fetching a new key from the authEndpoint..."),this.authorize(this.pusher.connection.socket_id,function(E,C){if(E){j.error("Failed to make a request to the authEndpoint: "+C+". Unable to fetch new key, so dropping encrypted event");return}if(g=a.nacl.secretbox.open(l,p,a.key),g===null){j.error("Failed to decrypt event with new key. Dropping encrypted event");return}a.emit(n,a.getDataToEmit(g))});return}this.emit(n,this.getDataToEmit(g))},t.prototype.getDataToEmit=function(n){var r=Object($r.decode)(n);try{return JSON.parse(r)}catch{return r}},t}(Mt),Qr=Kr,Yr=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,a){r.__proto__=a}||function(r,a){for(var l in a)a.hasOwnProperty(l)&&(r[l]=a[l])},e(t,n)};return function(t,n){e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Zr=function(e){Yr(t,e);function t(n,r){var a=e.call(this)||this;a.state="initialized",a.connection=null,a.key=n,a.options=r,a.timeline=a.options.timeline,a.usingTLS=a.options.useTLS,a.errorCallbacks=a.buildErrorCallbacks(),a.connectionCallbacks=a.buildConnectionCallbacks(a.errorCallbacks),a.handshakeCallbacks=a.buildHandshakeCallbacks(a.errorCallbacks);var l=A.getNetwork();return l.bind("online",function(){a.timeline.info({netinfo:"online"}),(a.state==="connecting"||a.state==="unavailable")&&a.retryIn(0)}),l.bind("offline",function(){a.timeline.info({netinfo:"offline"}),a.connection&&a.sendActivityCheck()}),a.updateStrategy(),a}return t.prototype.connect=function(){if(!(this.connection||this.runner)){if(!this.strategy.isSupported()){this.updateState("failed");return}this.updateState("connecting"),this.startConnecting(),this.setUnavailableTimer()}},t.prototype.send=function(n){return this.connection?this.connection.send(n):!1},t.prototype.send_event=function(n,r,a){return this.connection?this.connection.send_event(n,r,a):!1},t.prototype.disconnect=function(){this.disconnectInternally(),this.updateState("disconnected")},t.prototype.isUsingTLS=function(){return this.usingTLS},t.prototype.startConnecting=function(){var n=this,r=function(a,l){a?n.runner=n.strategy.connect(0,r):l.action==="error"?(n.emit("error",{type:"HandshakeError",error:l.error}),n.timeline.error({handshakeError:l.error})):(n.abortConnecting(),n.handshakeCallbacks[l.action](l))};this.runner=this.strategy.connect(0,r)},t.prototype.abortConnecting=function(){this.runner&&(this.runner.abort(),this.runner=null)},t.prototype.disconnectInternally=function(){if(this.abortConnecting(),this.clearRetryTimer(),this.clearUnavailableTimer(),this.connection){var n=this.abandonConnection();n.close()}},t.prototype.updateStrategy=function(){this.strategy=this.options.getStrategy({key:this.key,timeline:this.timeline,useTLS:this.usingTLS})},t.prototype.retryIn=function(n){var r=this;this.timeline.info({action:"retry",delay:n}),n>0&&this.emit("connecting_in",Math.round(n/1e3)),this.retryTimer=new ot(n||0,function(){r.disconnectInternally(),r.connect()})},t.prototype.clearRetryTimer=function(){this.retryTimer&&(this.retryTimer.ensureAborted(),this.retryTimer=null)},t.prototype.setUnavailableTimer=function(){var n=this;this.unavailableTimer=new ot(this.options.unavailableTimeout,function(){n.updateState("unavailable")})},t.prototype.clearUnavailableTimer=function(){this.unavailableTimer&&this.unavailableTimer.ensureAborted()},t.prototype.sendActivityCheck=function(){var n=this;this.stopActivityCheck(),this.connection.ping(),this.activityTimer=new ot(this.options.pongTimeout,function(){n.timeline.error({pong_timed_out:n.options.pongTimeout}),n.retryIn(0)})},t.prototype.resetActivityCheck=function(){var n=this;this.stopActivityCheck(),this.connection&&!this.connection.handlesActivityChecks()&&(this.activityTimer=new ot(this.activityTimeout,function(){n.sendActivityCheck()}))},t.prototype.stopActivityCheck=function(){this.activityTimer&&this.activityTimer.ensureAborted()},t.prototype.buildConnectionCallbacks=function(n){var r=this;return M({},n,{message:function(a){r.resetActivityCheck(),r.emit("message",a)},ping:function(){r.send_event("pusher:pong",{})},activity:function(){r.resetActivityCheck()},error:function(a){r.emit("error",a)},closed:function(){r.abandonConnection(),r.shouldRetry()&&r.retryIn(1e3)}})},t.prototype.buildHandshakeCallbacks=function(n){var r=this;return M({},n,{connected:function(a){r.activityTimeout=Math.min(r.options.activityTimeout,a.activityTimeout,a.connection.activityTimeout||1/0),r.clearUnavailableTimer(),r.setConnection(a.connection),r.socket_id=r.connection.id,r.updateState("connected",{socket_id:r.socket_id})}})},t.prototype.buildErrorCallbacks=function(){var n=this,r=function(a){return function(l){l.error&&n.emit("error",{type:"WebSocketError",error:l.error}),a(l)}};return{tls_only:r(function(){n.usingTLS=!0,n.updateStrategy(),n.retryIn(0)}),refused:r(function(){n.disconnect()}),backoff:r(function(){n.retryIn(1e3)}),retry:r(function(){n.retryIn(0)})}},t.prototype.setConnection=function(n){this.connection=n;for(var r in this.connectionCallbacks)this.connection.bind(r,this.connectionCallbacks[r]);this.resetActivityCheck()},t.prototype.abandonConnection=function(){if(this.connection){this.stopActivityCheck();for(var n in this.connectionCallbacks)this.connection.unbind(n,this.connectionCallbacks[n]);var r=this.connection;return this.connection=null,r}},t.prototype.updateState=function(n,r){var a=this.state;if(this.state=n,a!==n){var l=n;l==="connected"&&(l+=" with new socket ID "+r.socket_id),j.debug("State changed",a+" -> "+l),this.timeline.info({state:n,params:r}),this.emit("state_change",{previous:a,current:n}),this.emit(n,r)}},t.prototype.shouldRetry=function(){return this.state==="connecting"||this.state==="connected"},t}(Z),ti=Zr,ei=function(){function e(){this.channels={}}return e.prototype.add=function(t,n){return this.channels[t]||(this.channels[t]=ri(t,n)),this.channels[t]},e.prototype.all=function(){return Jn(this.channels)},e.prototype.find=function(t){return this.channels[t]},e.prototype.remove=function(t){var n=this.channels[t];return delete this.channels[t],n},e.prototype.disconnect=function(){Y(this.channels,function(t){t.disconnect()})},e}(),ni=ei;function ri(e,t){if(e.indexOf("private-encrypted-")===0){if(t.config.nacl)return tt.createEncryptedChannel(e,t,t.config.nacl);var n="Tried to subscribe to a private-encrypted- channel but no nacl implementation available",r=w.buildLogSuffix("encryptedChannelSupport");throw new Q(n+". "+r)}else{if(e.indexOf("private-")===0)return tt.createPrivateChannel(e,t);if(e.indexOf("presence-")===0)return tt.createPresenceChannel(e,t);if(e.indexOf("#")===0)throw new N('Cannot create a channel with name "'+e+'".');return tt.createChannel(e,t)}}var ii={createChannels:function(){return new ni},createConnectionManager:function(e,t){return new ti(e,t)},createChannel:function(e,t){return new Ht(e,t)},createPrivateChannel:function(e,t){return new Mt(e,t)},createPresenceChannel:function(e,t){return new Vr(e,t)},createEncryptedChannel:function(e,t,n){return new Qr(e,t,n)},createTimelineSender:function(e,t){return new Dr(e,t)},createHandshake:function(e,t){return new jr(e,t)},createAssistantToTheTransportManager:function(e,t,n){return new xr(e,t,n)}},tt=ii,oi=function(){function e(t){this.options=t||{},this.livesLeft=this.options.lives||1/0}return e.prototype.getAssistant=function(t){return tt.createAssistantToTheTransportManager(this,t,{minPingDelay:this.options.minPingDelay,maxPingDelay:this.options.maxPingDelay})},e.prototype.isAlive=function(){return this.livesLeft>0},e.prototype.reportDeath=function(){this.livesLeft-=1},e}(),Re=oi,si=function(){function e(t,n){this.strategies=t,this.loop=Boolean(n.loop),this.failFast=Boolean(n.failFast),this.timeout=n.timeout,this.timeoutLimit=n.timeoutLimit}return e.prototype.isSupported=function(){return Ce(this.strategies,B.method("isSupported"))},e.prototype.connect=function(t,n){var r=this,a=this.strategies,l=0,p=this.timeout,g=null,E=function(C,R){R?n(null,R):(l=l+1,r.loop&&(l=l%a.length),l<a.length?(p&&(p=p*2,r.timeoutLimit&&(p=Math.min(p,r.timeoutLimit))),g=r.tryStrategy(a[l],t,{timeout:p,failFast:r.failFast},E)):n(!0))};return g=this.tryStrategy(a[l],t,{timeout:p,failFast:this.failFast},E),{abort:function(){g.abort()},forceMinPriority:function(C){t=C,g&&g.forceMinPriority(C)}}},e.prototype.tryStrategy=function(t,n,r,a){var l=null,p=null;return r.timeout>0&&(l=new ot(r.timeout,function(){p.abort(),a(!0)})),p=t.connect(n,function(g,E){g&&l&&l.isRunning()&&!r.failFast||(l&&l.ensureAborted(),a(g,E))}),{abort:function(){l&&l.ensureAborted(),p.abort()},forceMinPriority:function(g){p.forceMinPriority(g)}}},e}(),at=si,ai=function(){function e(t){this.strategies=t}return e.prototype.isSupported=function(){return Ce(this.strategies,B.method("isSupported"))},e.prototype.connect=function(t,n){return ci(this.strategies,t,function(r,a){return function(l,p){if(a[r].error=l,l){ui(a)&&n(!0);return}dt(a,function(g){g.forceMinPriority(p.transport.priority)}),n(null,p)}})},e}(),Jt=ai;function ci(e,t,n){var r=we(e,function(a,l,p,g){return a.connect(t,n(l,g))});return{abort:function(){dt(r,li)},forceMinPriority:function(a){dt(r,function(l){l.forceMinPriority(a)})}}}function ui(e){return Vn(e,function(t){return Boolean(t.error)})}function li(e){!e.error&&!e.aborted&&(e.abort(),e.aborted=!0)}var hi=function(){function e(t,n,r){this.strategy=t,this.transports=n,this.ttl=r.ttl||1800*1e3,this.usingTLS=r.useTLS,this.timeline=r.timeline}return e.prototype.isSupported=function(){return this.strategy.isSupported()},e.prototype.connect=function(t,n){var r=this.usingTLS,a=pi(r),l=[this.strategy];if(a&&a.timestamp+this.ttl>=B.now()){var p=this.transports[a.transport];p&&(this.timeline.info({cached:!0,transport:a.transport,latency:a.latency}),l.push(new at([p],{timeout:a.latency*2+1e3,failFast:!0})))}var g=B.now(),E=l.pop().connect(t,function C(R,I){R?(Le(r),l.length>0?(g=B.now(),E=l.pop().connect(t,C)):n(R)):(di(r,I.transport.name,B.now()-g),n(null,I))});return{abort:function(){E.abort()},forceMinPriority:function(C){t=C,E&&E.forceMinPriority(C)}}},e}(),fi=hi;function Wt(e){return"pusherTransport"+(e?"TLS":"NonTLS")}function pi(e){var t=A.getLocalStorage();if(t)try{var n=t[Wt(e)];if(n)return JSON.parse(n)}catch{Le(e)}return null}function di(e,t,n){var r=A.getLocalStorage();if(r)try{r[Wt(e)]=St({timestamp:B.now(),transport:t,latency:n})}catch{}}function Le(e){var t=A.getLocalStorage();if(t)try{delete t[Wt(e)]}catch{}}var yi=function(){function e(t,n){var r=n.delay;this.strategy=t,this.options={delay:r}}return e.prototype.isSupported=function(){return this.strategy.isSupported()},e.prototype.connect=function(t,n){var r=this.strategy,a,l=new ot(this.options.delay,function(){a=r.connect(t,n)});return{abort:function(){l.ensureAborted(),a&&a.abort()},forceMinPriority:function(p){t=p,a&&a.forceMinPriority(p)}}},e}(),Ct=yi,vi=function(){function e(t,n,r){this.test=t,this.trueBranch=n,this.falseBranch=r}return e.prototype.isSupported=function(){var t=this.test()?this.trueBranch:this.falseBranch;return t.isSupported()},e.prototype.connect=function(t,n){var r=this.test()?this.trueBranch:this.falseBranch;return r.connect(t,n)},e}(),yt=vi,mi=function(){function e(t){this.strategy=t}return e.prototype.isSupported=function(){return this.strategy.isSupported()},e.prototype.connect=function(t,n){var r=this.strategy.connect(t,function(a,l){l&&r.abort(),n(a,l)});return r},e}(),gi=mi;function vt(e){return function(){return e.isSupported()}}var bi=function(e,t,n){var r={};function a(Je,Ao,Ro,Lo,No){var We=n(e,Je,Ao,Ro,Lo,No);return r[Je]=We,We}var l=Object.assign({},t,{hostNonTLS:e.wsHost+":"+e.wsPort,hostTLS:e.wsHost+":"+e.wssPort,httpPath:e.wsPath}),p=Object.assign({},l,{useTLS:!0}),g=Object.assign({},t,{hostNonTLS:e.httpHost+":"+e.httpPort,hostTLS:e.httpHost+":"+e.httpsPort,httpPath:e.httpPath}),E={loop:!0,timeout:15e3,timeoutLimit:6e4},C=new Re({lives:2,minPingDelay:1e4,maxPingDelay:e.activityTimeout}),R=new Re({lives:2,minPingDelay:1e4,maxPingDelay:e.activityTimeout}),I=a("ws","ws",3,l,C),G=a("wss","ws",3,p,C),To=a("sockjs","sockjs",1,g),Fe=a("xhr_streaming","xhr_streaming",1,g,R),Po=a("xdr_streaming","xdr_streaming",1,g,R),qe=a("xhr_polling","xhr_polling",1,g),Oo=a("xdr_polling","xdr_polling",1,g),Be=new at([I],E),Eo=new at([G],E),xo=new at([To],E),He=new at([new yt(vt(Fe),Fe,Po)],E),Me=new at([new yt(vt(qe),qe,Oo)],E),ze=new at([new yt(vt(He),new Jt([He,new Ct(Me,{delay:4e3})]),Me)],E),Gt=new yt(vt(ze),ze,xo),Kt;return t.useTLS?Kt=new Jt([Be,new Ct(Gt,{delay:2e3})]):Kt=new Jt([Be,new Ct(Eo,{delay:2e3}),new Ct(Gt,{delay:5e3})]),new fi(new gi(new yt(vt(I),Kt,Gt)),r,{ttl:18e5,timeline:t.timeline,useTLS:t.useTLS})},_i=bi,wi=function(){var e=this;e.timeline.info(e.buildTimelineMessage({transport:e.name+(e.options.useTLS?"s":"")})),e.hooks.isInitialized()?e.changeState("initialized"):e.hooks.file?(e.changeState("initializing"),O.load(e.hooks.file,{useTLS:e.options.useTLS},function(t,n){e.hooks.isInitialized()?(e.changeState("initialized"),n(!0)):(t&&e.onError(t),e.onClose(),n(!1))})):e.onClose()},Si={getRequest:function(e){var t=new window.XDomainRequest;return t.ontimeout=function(){e.emit("error",new U),e.close()},t.onerror=function(n){e.emit("error",n),e.close()},t.onprogress=function(){t.responseText&&t.responseText.length>0&&e.onChunk(200,t.responseText)},t.onload=function(){t.responseText&&t.responseText.length>0&&e.onChunk(200,t.responseText),e.emit("finished",200),e.close()},t},abortRequest:function(e){e.ontimeout=e.onerror=e.onprogress=e.onload=null,e.abort()}},ki=Si,Ci=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,a){r.__proto__=a}||function(r,a){for(var l in a)a.hasOwnProperty(l)&&(r[l]=a[l])},e(t,n)};return function(t,n){e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ti=256*1024,Pi=function(e){Ci(t,e);function t(n,r,a){var l=e.call(this)||this;return l.hooks=n,l.method=r,l.url=a,l}return t.prototype.start=function(n){var r=this;this.position=0,this.xhr=this.hooks.getRequest(this),this.unloader=function(){r.close()},A.addUnloadListener(this.unloader),this.xhr.open(this.method,this.url,!0),this.xhr.setRequestHeader&&this.xhr.setRequestHeader("Content-Type","application/json"),this.xhr.send(n)},t.prototype.close=function(){this.unloader&&(A.removeUnloadListener(this.unloader),this.unloader=null),this.xhr&&(this.hooks.abortRequest(this.xhr),this.xhr=null)},t.prototype.onChunk=function(n,r){for(;;){var a=this.advanceBuffer(r);if(a)this.emit("chunk",{status:n,data:a});else break}this.isBufferTooLong(r)&&this.emit("buffer_too_long")},t.prototype.advanceBuffer=function(n){var r=n.slice(this.position),a=r.indexOf(`
`);return a!==-1?(this.position+=a+1,r.slice(0,a)):null},t.prototype.isBufferTooLong=function(n){return this.position===n.length&&n.length>Ti},t}(Z),Oi=Pi,Xt;(function(e){e[e.CONNECTING=0]="CONNECTING",e[e.OPEN=1]="OPEN",e[e.CLOSED=3]="CLOSED"})(Xt||(Xt={}));var ct=Xt,Ei=1,xi=function(){function e(t,n){this.hooks=t,this.session=je(1e3)+"/"+Ni(8),this.location=Ai(n),this.readyState=ct.CONNECTING,this.openStream()}return e.prototype.send=function(t){return this.sendRaw(JSON.stringify([t]))},e.prototype.ping=function(){this.hooks.sendHeartbeat(this)},e.prototype.close=function(t,n){this.onClose(t,n,!0)},e.prototype.sendRaw=function(t){if(this.readyState===ct.OPEN)try{return A.createSocketRequest("POST",Ne(Ri(this.location,this.session))).start(t),!0}catch{return!1}else return!1},e.prototype.reconnect=function(){this.closeStream(),this.openStream()},e.prototype.onClose=function(t,n,r){this.closeStream(),this.readyState=ct.CLOSED,this.onclose&&this.onclose({code:t,reason:n,wasClean:r})},e.prototype.onChunk=function(t){if(t.status===200){this.readyState===ct.OPEN&&this.onActivity();var n,r=t.data.slice(0,1);switch(r){case"o":n=JSON.parse(t.data.slice(1)||"{}"),this.onOpen(n);break;case"a":n=JSON.parse(t.data.slice(1)||"[]");for(var a=0;a<n.length;a++)this.onEvent(n[a]);break;case"m":n=JSON.parse(t.data.slice(1)||"null"),this.onEvent(n);break;case"h":this.hooks.onHeartbeat(this);break;case"c":n=JSON.parse(t.data.slice(1)||"[]"),this.onClose(n[0],n[1],!0);break}}},e.prototype.onOpen=function(t){this.readyState===ct.CONNECTING?(t&&t.hostname&&(this.location.base=Li(this.location.base,t.hostname)),this.readyState=ct.OPEN,this.onopen&&this.onopen()):this.onClose(1006,"Server lost session",!0)},e.prototype.onEvent=function(t){this.readyState===ct.OPEN&&this.onmessage&&this.onmessage({data:t})},e.prototype.onActivity=function(){this.onactivity&&this.onactivity()},e.prototype.onError=function(t){this.onerror&&this.onerror(t)},e.prototype.openStream=function(){var t=this;this.stream=A.createSocketRequest("POST",Ne(this.hooks.getReceiveURL(this.location,this.session))),this.stream.bind("chunk",function(n){t.onChunk(n)}),this.stream.bind("finished",function(n){t.hooks.onFinished(t,n)}),this.stream.bind("buffer_too_long",function(){t.reconnect()});try{this.stream.start()}catch(n){B.defer(function(){t.onError(n),t.onClose(1006,"Could not start streaming",!1)})}},e.prototype.closeStream=function(){this.stream&&(this.stream.unbind_all(),this.stream.close(),this.stream=null)},e}();function Ai(e){var t=/([^\?]*)\/*(\??.*)/.exec(e);return{base:t[1],queryString:t[2]}}function Ri(e,t){return e.base+"/"+t+"/xhr_send"}function Ne(e){var t=e.indexOf("?")===-1?"?":"&";return e+t+"t="+ +new Date+"&n="+Ei++}function Li(e,t){var n=/(https?:\/\/)([^\/:]+)((\/|:)?.*)/.exec(e);return n[1]+t+n[3]}function je(e){return A.randomInt(e)}function Ni(e){for(var t=[],n=0;n<e;n++)t.push(je(32).toString(32));return t.join("")}var ji=xi,Ii={getReceiveURL:function(e,t){return e.base+"/"+t+"/xhr_streaming"+e.queryString},onHeartbeat:function(e){e.sendRaw("[]")},sendHeartbeat:function(e){e.sendRaw("[]")},onFinished:function(e,t){e.onClose(1006,"Connection interrupted ("+t+")",!1)}},Di=Ii,Ui={getReceiveURL:function(e,t){return e.base+"/"+t+"/xhr"+e.queryString},onHeartbeat:function(){},sendHeartbeat:function(e){e.sendRaw("[]")},onFinished:function(e,t){t===200?e.reconnect():e.onClose(1006,"Connection interrupted ("+t+")",!1)}},Fi=Ui,qi={getRequest:function(e){var t=A.getXHRAPI(),n=new t;return n.onreadystatechange=n.onprogress=function(){switch(n.readyState){case 3:n.responseText&&n.responseText.length>0&&e.onChunk(n.status,n.responseText);break;case 4:n.responseText&&n.responseText.length>0&&e.onChunk(n.status,n.responseText),e.emit("finished",n.status),e.close();break}},n},abortRequest:function(e){e.onreadystatechange=null,e.abort()}},Bi=qi,Hi={createStreamingSocket:function(e){return this.createSocket(Di,e)},createPollingSocket:function(e){return this.createSocket(Fi,e)},createSocket:function(e,t){return new ji(e,t)},createXHR:function(e,t){return this.createRequest(Bi,e,t)},createRequest:function(e,t,n){return new Oi(e,t,n)}},Ie=Hi;Ie.createXDR=function(e,t){return this.createRequest(ki,e,t)};var Mi=Ie,zi={nextAuthCallbackID:1,auth_callbacks:{},ScriptReceivers:f,DependenciesReceivers:T,getDefaultStrategy:_i,Transports:Cr,transportConnectionInitializer:wi,HTTPFactory:Mi,TimelineTransport:sr,getXHRAPI:function(){return window.XMLHttpRequest},getWebSocketAPI:function(){return window.WebSocket||window.MozWebSocket},setup:function(e){var t=this;window.Pusher=e;var n=function(){t.onDocumentBody(e.ready)};window.JSON?n():O.load("json2",{},n)},getDocument:function(){return document},getProtocol:function(){return this.getDocument().location.protocol},getAuthorizers:function(){return{ajax:Ln,jsonp:Zn}},onDocumentBody:function(e){var t=this;document.body?e():setTimeout(function(){t.onDocumentBody(e)},0)},createJSONPRequest:function(e,t){return new rr(e,t)},createScriptRequest:function(e){return new er(e)},getLocalStorage:function(){try{return window.localStorage}catch{return}},createXHR:function(){return this.getXHRAPI()?this.createXMLHttpRequest():this.createMicrosoftXHR()},createXMLHttpRequest:function(){var e=this.getXHRAPI();return new e},createMicrosoftXHR:function(){return new ActiveXObject("Microsoft.XMLHTTP")},getNetwork:function(){return Or},createWebSocket:function(e){var t=this.getWebSocketAPI();return new t(e)},createSocketRequest:function(e,t){if(this.isXHRSupported())return this.HTTPFactory.createXHR(e,t);if(this.isXDRSupported(t.indexOf("https:")===0))return this.HTTPFactory.createXDR(e,t);throw"Cross-origin HTTP requests are not supported"},isXHRSupported:function(){var e=this.getXHRAPI();return Boolean(e)&&new e().withCredentials!==void 0},isXDRSupported:function(e){var t=e?"https:":"http:",n=this.getProtocol();return Boolean(window.XDomainRequest)&&n===t},addUnloadListener:function(e){window.addEventListener!==void 0?window.addEventListener("unload",e,!1):window.attachEvent!==void 0&&window.attachEvent("onunload",e)},removeUnloadListener:function(e){window.addEventListener!==void 0?window.removeEventListener("unload",e,!1):window.detachEvent!==void 0&&window.detachEvent("onunload",e)},randomInt:function(e){var t=function(){var n=window.crypto||window.msCrypto,r=n.getRandomValues(new Uint32Array(1))[0];return r/Math.pow(2,32)};return Math.floor(t()*e)}},A=zi,Vt;(function(e){e[e.ERROR=3]="ERROR",e[e.INFO=6]="INFO",e[e.DEBUG=7]="DEBUG"})(Vt||(Vt={}));var Tt=Vt,Ji=function(){function e(t,n,r){this.key=t,this.session=n,this.events=[],this.options=r||{},this.sent=0,this.uniqueID=0}return e.prototype.log=function(t,n){t<=this.options.level&&(this.events.push(M({},n,{timestamp:B.now()})),this.options.limit&&this.events.length>this.options.limit&&this.events.shift())},e.prototype.error=function(t){this.log(Tt.ERROR,t)},e.prototype.info=function(t){this.log(Tt.INFO,t)},e.prototype.debug=function(t){this.log(Tt.DEBUG,t)},e.prototype.isEmpty=function(){return this.events.length===0},e.prototype.send=function(t,n){var r=this,a=M({session:this.session,bundle:this.sent+1,key:this.key,lib:"js",version:this.options.version,cluster:this.options.cluster,features:this.options.features,timeline:this.events},this.options.params);return this.events=[],t(a,function(l,p){l||r.sent++,n&&n(l,p)}),!0},e.prototype.generateUniqueID=function(){return this.uniqueID++,this.uniqueID},e}(),Wi=Ji,Xi=function(){function e(t,n,r,a){this.name=t,this.priority=n,this.transport=r,this.options=a||{}}return e.prototype.isSupported=function(){return this.transport.isSupported({useTLS:this.options.useTLS})},e.prototype.connect=function(t,n){var r=this;if(this.isSupported()){if(this.priority<t)return De(new H,n)}else return De(new X,n);var a=!1,l=this.transport.createConnection(this.name,this.priority,this.options.key,this.options),p=null,g=function(){l.unbind("initialized",g),l.connect()},E=function(){p=tt.createHandshake(l,function(G){a=!0,I(),n(null,G)})},C=function(G){I(),n(G)},R=function(){I();var G;G=St(l),n(new W(G))},I=function(){l.unbind("initialized",g),l.unbind("open",E),l.unbind("error",C),l.unbind("closed",R)};return l.bind("initialized",g),l.bind("open",E),l.bind("error",C),l.bind("closed",R),l.initialize(),{abort:function(){a||(I(),p?p.close():l.close())},forceMinPriority:function(G){a||r.priority<G&&(p?p.close():l.close())}}},e}(),Vi=Xi;function De(e,t){return B.defer(function(){t(e)}),{abort:function(){},forceMinPriority:function(){}}}var $i=A.Transports,Gi=function(e,t,n,r,a,l){var p=$i[n];if(!p)throw new V(n);var g=(!e.enabledTransports||be(e.enabledTransports,t)!==-1)&&(!e.disabledTransports||be(e.disabledTransports,t)===-1),E;return g?(a=Object.assign({ignoreNullOrigin:e.ignoreNullOrigin},a),E=new Vi(t,r,l?l.getAssistant(p):p,a)):E=Ki,E},Ki={isSupported:function(){return!1},connect:function(e,t){var n=B.defer(function(){t(new X)});return{abort:function(){n.ensureAborted()},forceMinPriority:function(){}}}};function Qi(e){if(e==null)throw"You must pass an options object";if(e.cluster==null)throw"Options object must provide a cluster";"disableStats"in e&&j.warn("The disableStats option is deprecated in favor of enableStats")}var Yi=function(e,t){var n="socket_id="+encodeURIComponent(e.socketId);for(var r in t.params)n+="&"+encodeURIComponent(r)+"="+encodeURIComponent(t.params[r]);if(t.paramsProvider!=null){var a=t.paramsProvider();for(var r in a)n+="&"+encodeURIComponent(r)+"="+encodeURIComponent(a[r])}return n},Zi=function(e){if(typeof A.getAuthorizers()[e.transport]>"u")throw"'"+e.transport+"' is not a recognized auth transport";return function(t,n){var r=Yi(t,e);A.getAuthorizers()[e.transport](A,r,e,m.UserAuthentication,n)}},to=Zi,eo=function(e,t){var n="socket_id="+encodeURIComponent(e.socketId);n+="&channel_name="+encodeURIComponent(e.channelName);for(var r in t.params)n+="&"+encodeURIComponent(r)+"="+encodeURIComponent(t.params[r]);if(t.paramsProvider!=null){var a=t.paramsProvider();for(var r in a)n+="&"+encodeURIComponent(r)+"="+encodeURIComponent(a[r])}return n},no=function(e){if(typeof A.getAuthorizers()[e.transport]>"u")throw"'"+e.transport+"' is not a recognized auth transport";return function(t,n){var r=eo(t,e);A.getAuthorizers()[e.transport](A,r,e,m.ChannelAuthorization,n)}},ro=no,oo=function(e,t,n){var r={authTransport:t.transport,authEndpoint:t.endpoint,auth:{params:t.params,headers:t.headers}};return function(a,l){var p=e.channel(a.channelName),g=n(p,r);g.authorize(a.socketId,l)}},lt=function(){return lt=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},lt.apply(this,arguments)};function so(e,t){var n={activityTimeout:e.activityTimeout||b.activityTimeout,cluster:e.cluster,httpPath:e.httpPath||b.httpPath,httpPort:e.httpPort||b.httpPort,httpsPort:e.httpsPort||b.httpsPort,pongTimeout:e.pongTimeout||b.pongTimeout,statsHost:e.statsHost||b.stats_host,unavailableTimeout:e.unavailableTimeout||b.unavailableTimeout,wsPath:e.wsPath||b.wsPath,wsPort:e.wsPort||b.wsPort,wssPort:e.wssPort||b.wssPort,enableStats:ho(e),httpHost:ao(e),useTLS:lo(e),wsHost:co(e),userAuthenticator:fo(e),channelAuthorizer:yo(e,t)};return"disabledTransports"in e&&(n.disabledTransports=e.disabledTransports),"enabledTransports"in e&&(n.enabledTransports=e.enabledTransports),"ignoreNullOrigin"in e&&(n.ignoreNullOrigin=e.ignoreNullOrigin),"timelineParams"in e&&(n.timelineParams=e.timelineParams),"nacl"in e&&(n.nacl=e.nacl),n}function ao(e){return e.httpHost?e.httpHost:e.cluster?"sockjs-"+e.cluster+".pusher.com":b.httpHost}function co(e){return e.wsHost?e.wsHost:uo(e.cluster)}function uo(e){return"ws-"+e+".pusher.com"}function lo(e){return A.getProtocol()==="https:"?!0:e.forceTLS!==!1}function ho(e){return"enableStats"in e?e.enableStats:"disableStats"in e?!e.disableStats:!1}function fo(e){var t=lt(lt({},b.userAuthentication),e.userAuthentication);return"customHandler"in t&&t.customHandler!=null?t.customHandler:to(t)}function po(e,t){var n;return"channelAuthorization"in e?n=lt(lt({},b.channelAuthorization),e.channelAuthorization):(n={transport:e.authTransport||b.authTransport,endpoint:e.authEndpoint||b.authEndpoint},"auth"in e&&("params"in e.auth&&(n.params=e.auth.params),"headers"in e.auth&&(n.headers=e.auth.headers)),"authorizer"in e&&(n.customHandler=oo(t,n,e.authorizer))),n}function yo(e,t){var n=po(e,t);return"customHandler"in n&&n.customHandler!=null?n.customHandler:ro(n)}var vo=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,a){r.__proto__=a}||function(r,a){for(var l in a)a.hasOwnProperty(l)&&(r[l]=a[l])},e(t,n)};return function(t,n){e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),mo=function(e){vo(t,e);function t(n){var r=e.call(this,function(a,l){j.debug("No callbacks on watchlist events for "+a)})||this;return r.pusher=n,r.bindWatchlistInternalEvent(),r}return t.prototype.handleEvent=function(n){var r=this;n.data.events.forEach(function(a){r.emit(a.name,a)})},t.prototype.bindWatchlistInternalEvent=function(){var n=this;this.pusher.connection.bind("message",function(r){var a=r.event;a==="pusher_internal:watchlist_events"&&n.handleEvent(r)})},t}(Z),go=mo;function bo(){var e,t,n=new Promise(function(r,a){e=r,t=a});return{promise:n,resolve:e,reject:t}}var _o=bo,wo=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,a){r.__proto__=a}||function(r,a){for(var l in a)a.hasOwnProperty(l)&&(r[l]=a[l])},e(t,n)};return function(t,n){e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),So=function(e){wo(t,e);function t(n){var r=e.call(this,function(a,l){j.debug("No callbacks on user for "+a)})||this;return r.signin_requested=!1,r.user_data=null,r.serverToUserChannel=null,r.signinDonePromise=null,r._signinDoneResolve=null,r._onAuthorize=function(a,l){if(a){j.warn("Error during signin: "+a),r._cleanup();return}r.pusher.send_event("pusher:signin",{auth:l.auth,user_data:l.user_data})},r.pusher=n,r.pusher.connection.bind("state_change",function(a){var l=a.previous,p=a.current;l!=="connected"&&p==="connected"&&r._signin(),l==="connected"&&p!=="connected"&&(r._cleanup(),r._newSigninPromiseIfNeeded())}),r.watchlist=new go(n),r.pusher.connection.bind("message",function(a){var l=a.event;l==="pusher:signin_success"&&r._onSigninSuccess(a.data),r.serverToUserChannel&&r.serverToUserChannel.name===a.channel&&r.serverToUserChannel.handleEvent(a)}),r}return t.prototype.signin=function(){this.signin_requested||(this.signin_requested=!0,this._signin())},t.prototype._signin=function(){this.signin_requested&&(this._newSigninPromiseIfNeeded(),this.pusher.connection.state==="connected"&&this.pusher.config.userAuthenticator({socketId:this.pusher.connection.socket_id},this._onAuthorize))},t.prototype._onSigninSuccess=function(n){try{this.user_data=JSON.parse(n.user_data)}catch{j.error("Failed parsing user data after signin: "+n.user_data),this._cleanup();return}if(typeof this.user_data.id!="string"||this.user_data.id===""){j.error("user_data doesn't contain an id. user_data: "+this.user_data),this._cleanup();return}this._signinDoneResolve(),this._subscribeChannels()},t.prototype._subscribeChannels=function(){var n=this,r=function(a){a.subscriptionPending&&a.subscriptionCancelled?a.reinstateSubscription():!a.subscriptionPending&&n.pusher.connection.state==="connected"&&a.subscribe()};this.serverToUserChannel=new Ht("#server-to-user-"+this.user_data.id,this.pusher),this.serverToUserChannel.bind_global(function(a,l){a.indexOf("pusher_internal:")===0||a.indexOf("pusher:")===0||n.emit(a,l)}),r(this.serverToUserChannel)},t.prototype._cleanup=function(){this.user_data=null,this.serverToUserChannel&&(this.serverToUserChannel.unbind_all(),this.serverToUserChannel.disconnect(),this.serverToUserChannel=null),this.signin_requested&&this._signinDoneResolve()},t.prototype._newSigninPromiseIfNeeded=function(){if(this.signin_requested&&!(this.signinDonePromise&&!this.signinDonePromise.done)){var n=_o(),r=n.promise,a=n.resolve;r.done=!1;var l=function(){r.done=!0};r.then(l).catch(l),this.signinDonePromise=r,this._signinDoneResolve=a}},t}(Z),ko=So,Ue=function(){function e(t,n){var r=this;Co(t),Qi(n),this.key=t,this.config=so(n,this),this.channels=tt.createChannels(),this.global_emitter=new Z,this.sessionID=A.randomInt(1e9),this.timeline=new Wi(this.key,this.sessionID,{cluster:this.config.cluster,features:e.getClientFeatures(),params:this.config.timelineParams||{},limit:50,level:Tt.INFO,version:b.VERSION}),this.config.enableStats&&(this.timelineSender=tt.createTimelineSender(this.timeline,{host:this.config.statsHost,path:"/timeline/v2/"+A.TimelineTransport.name}));var a=function(l){return A.getDefaultStrategy(r.config,l,Gi)};this.connection=tt.createConnectionManager(this.key,{getStrategy:a,timeline:this.timeline,activityTimeout:this.config.activityTimeout,pongTimeout:this.config.pongTimeout,unavailableTimeout:this.config.unavailableTimeout,useTLS:Boolean(this.config.useTLS)}),this.connection.bind("connected",function(){r.subscribeAll(),r.timelineSender&&r.timelineSender.send(r.connection.isUsingTLS())}),this.connection.bind("message",function(l){var p=l.event,g=p.indexOf("pusher_internal:")===0;if(l.channel){var E=r.channel(l.channel);E&&E.handleEvent(l)}g||r.global_emitter.emit(l.event,l.data)}),this.connection.bind("connecting",function(){r.channels.disconnect()}),this.connection.bind("disconnected",function(){r.channels.disconnect()}),this.connection.bind("error",function(l){j.warn(l)}),e.instances.push(this),this.timeline.info({instances:e.instances.length}),this.user=new ko(this),e.isReady&&this.connect()}return e.ready=function(){e.isReady=!0;for(var t=0,n=e.instances.length;t<n;t++)e.instances[t].connect()},e.getClientFeatures=function(){return _e(ke({ws:A.Transports.ws},function(t){return t.isSupported({})}))},e.prototype.channel=function(t){return this.channels.find(t)},e.prototype.allChannels=function(){return this.channels.all()},e.prototype.connect=function(){if(this.connection.connect(),this.timelineSender&&!this.timelineSenderTimer){var t=this.connection.isUsingTLS(),n=this.timelineSender;this.timelineSenderTimer=new Hn(6e4,function(){n.send(t)})}},e.prototype.disconnect=function(){this.connection.disconnect(),this.timelineSenderTimer&&(this.timelineSenderTimer.ensureAborted(),this.timelineSenderTimer=null)},e.prototype.bind=function(t,n,r){return this.global_emitter.bind(t,n,r),this},e.prototype.unbind=function(t,n,r){return this.global_emitter.unbind(t,n,r),this},e.prototype.bind_global=function(t){return this.global_emitter.bind_global(t),this},e.prototype.unbind_global=function(t){return this.global_emitter.unbind_global(t),this},e.prototype.unbind_all=function(t){return this.global_emitter.unbind_all(),this},e.prototype.subscribeAll=function(){var t;for(t in this.channels.channels)this.channels.channels.hasOwnProperty(t)&&this.subscribe(t)},e.prototype.subscribe=function(t){var n=this.channels.add(t,this);return n.subscriptionPending&&n.subscriptionCancelled?n.reinstateSubscription():!n.subscriptionPending&&this.connection.state==="connected"&&n.subscribe(),n},e.prototype.unsubscribe=function(t){var n=this.channels.find(t);n&&n.subscriptionPending?n.cancelSubscription():(n=this.channels.remove(t),n&&n.subscribed&&n.unsubscribe())},e.prototype.send_event=function(t,n,r){return this.connection.send_event(t,n,r)},e.prototype.shouldUseTLS=function(){return this.config.useTLS},e.prototype.signin=function(){this.user.signin()},e.instances=[],e.isReady=!1,e.logToConsole=!1,e.Runtime=A,e.ScriptReceivers=A.ScriptReceivers,e.DependenciesReceivers=A.DependenciesReceivers,e.auth_callbacks=A.auth_callbacks,e}(),$t=c.default=Ue;function Co(e){if(e==null)throw"You must pass your app key when you instantiate Pusher."}A.setup(Ue)}])})})(aa);function oe(i){return oe=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},oe(i)}function F(i,o){if(!(i instanceof o))throw new TypeError("Cannot call a class as a function")}function on(i,o){for(var s=0;s<o.length;s++){var c=o[s];c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(i,c.key,c)}}function q(i,o,s){return o&&on(i.prototype,o),s&&on(i,s),Object.defineProperty(i,"prototype",{writable:!1}),i}function se(){return se=Object.assign||function(i){for(var o=1;o<arguments.length;o++){var s=arguments[o];for(var c in s)Object.prototype.hasOwnProperty.call(s,c)&&(i[c]=s[c])}return i},se.apply(this,arguments)}function z(i,o){if(typeof o!="function"&&o!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(o&&o.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),Object.defineProperty(i,"prototype",{writable:!1}),o&&ae(i,o)}function Rt(i){return Rt=Object.setPrototypeOf?Object.getPrototypeOf:function(s){return s.__proto__||Object.getPrototypeOf(s)},Rt(i)}function ae(i,o){return ae=Object.setPrototypeOf||function(c,u){return c.__proto__=u,c},ae(i,o)}function ca(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function ua(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function la(i,o){if(o&&(typeof o=="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ua(i)}function J(i){var o=ca();return function(){var c=Rt(i),u;if(o){var h=Rt(this).constructor;u=Reflect.construct(c,arguments,h)}else u=c.apply(this,arguments);return la(this,u)}}var ye=function(){function i(){F(this,i)}return q(i,[{key:"listenForWhisper",value:function(s,c){return this.listen(".client-"+s,c)}},{key:"notification",value:function(s){return this.listen(".Illuminate\\Notifications\\Events\\BroadcastNotificationCreated",s)}},{key:"stopListeningForWhisper",value:function(s,c){return this.stopListening(".client-"+s,c)}}]),i}(),En=function(){function i(o){F(this,i),this.setNamespace(o)}return q(i,[{key:"format",value:function(s){return s.charAt(0)==="."||s.charAt(0)==="\\"?s.substr(1):(this.namespace&&(s=this.namespace+"."+s),s.replace(/\./g,"\\"))}},{key:"setNamespace",value:function(s){this.namespace=s}}]),i}(),Ut=function(i){z(s,i);var o=J(s);function s(c,u,h){var f;return F(this,s),f=o.call(this),f.name=u,f.pusher=c,f.options=h,f.eventFormatter=new En(f.options.namespace),f.subscribe(),f}return q(s,[{key:"subscribe",value:function(){this.subscription=this.pusher.subscribe(this.name)}},{key:"unsubscribe",value:function(){this.pusher.unsubscribe(this.name)}},{key:"listen",value:function(u,h){return this.on(this.eventFormatter.format(u),h),this}},{key:"listenToAll",value:function(u){var h=this;return this.subscription.bind_global(function(f,y){if(!f.startsWith("pusher:")){var b=h.options.namespace.replace(/\./g,"\\"),v=f.startsWith(b)?f.substring(b.length+1):"."+f;u(v,y)}}),this}},{key:"stopListening",value:function(u,h){return h?this.subscription.unbind(this.eventFormatter.format(u),h):this.subscription.unbind(this.eventFormatter.format(u)),this}},{key:"stopListeningToAll",value:function(u){return u?this.subscription.unbind_global(u):this.subscription.unbind_global(),this}},{key:"subscribed",value:function(u){return this.on("pusher:subscription_succeeded",function(){u()}),this}},{key:"error",value:function(u){return this.on("pusher:subscription_error",function(h){u(h)}),this}},{key:"on",value:function(u,h){return this.subscription.bind(u,h),this}}]),s}(ye),ha=function(i){z(s,i);var o=J(s);function s(){return F(this,s),o.apply(this,arguments)}return q(s,[{key:"whisper",value:function(u,h){return this.pusher.channels.channels[this.name].trigger("client-".concat(u),h),this}}]),s}(Ut),fa=function(i){z(s,i);var o=J(s);function s(){return F(this,s),o.apply(this,arguments)}return q(s,[{key:"whisper",value:function(u,h){return this.pusher.channels.channels[this.name].trigger("client-".concat(u),h),this}}]),s}(Ut),pa=function(i){z(s,i);var o=J(s);function s(){return F(this,s),o.apply(this,arguments)}return q(s,[{key:"here",value:function(u){return this.on("pusher:subscription_succeeded",function(h){u(Object.keys(h.members).map(function(f){return h.members[f]}))}),this}},{key:"joining",value:function(u){return this.on("pusher:member_added",function(h){u(h.info)}),this}},{key:"leaving",value:function(u){return this.on("pusher:member_removed",function(h){u(h.info)}),this}},{key:"whisper",value:function(u,h){return this.pusher.channels.channels[this.name].trigger("client-".concat(u),h),this}}]),s}(Ut),xn=function(i){z(s,i);var o=J(s);function s(c,u,h){var f;return F(this,s),f=o.call(this),f.events={},f.listeners={},f.name=u,f.socket=c,f.options=h,f.eventFormatter=new En(f.options.namespace),f.subscribe(),f}return q(s,[{key:"subscribe",value:function(){this.socket.emit("subscribe",{channel:this.name,auth:this.options.auth||{}})}},{key:"unsubscribe",value:function(){this.unbind(),this.socket.emit("unsubscribe",{channel:this.name,auth:this.options.auth||{}})}},{key:"listen",value:function(u,h){return this.on(this.eventFormatter.format(u),h),this}},{key:"stopListening",value:function(u,h){return this.unbindEvent(this.eventFormatter.format(u),h),this}},{key:"subscribed",value:function(u){return this.on("connect",function(h){u(h)}),this}},{key:"error",value:function(u){return this}},{key:"on",value:function(u,h){var f=this;return this.listeners[u]=this.listeners[u]||[],this.events[u]||(this.events[u]=function(y,b){f.name===y&&f.listeners[u]&&f.listeners[u].forEach(function(v){return v(b)})},this.socket.on(u,this.events[u])),this.listeners[u].push(h),this}},{key:"unbind",value:function(){var u=this;Object.keys(this.events).forEach(function(h){u.unbindEvent(h)})}},{key:"unbindEvent",value:function(u,h){this.listeners[u]=this.listeners[u]||[],h&&(this.listeners[u]=this.listeners[u].filter(function(f){return f!==h})),(!h||this.listeners[u].length===0)&&(this.events[u]&&(this.socket.removeListener(u,this.events[u]),delete this.events[u]),delete this.listeners[u])}}]),s}(ye),An=function(i){z(s,i);var o=J(s);function s(){return F(this,s),o.apply(this,arguments)}return q(s,[{key:"whisper",value:function(u,h){return this.socket.emit("client event",{channel:this.name,event:"client-".concat(u),data:h}),this}}]),s}(xn),da=function(i){z(s,i);var o=J(s);function s(){return F(this,s),o.apply(this,arguments)}return q(s,[{key:"here",value:function(u){return this.on("presence:subscribed",function(h){u(h.map(function(f){return f.user_info}))}),this}},{key:"joining",value:function(u){return this.on("presence:joining",function(h){return u(h.user_info)}),this}},{key:"leaving",value:function(u){return this.on("presence:leaving",function(h){return u(h.user_info)}),this}}]),s}(An),Lt=function(i){z(s,i);var o=J(s);function s(){return F(this,s),o.apply(this,arguments)}return q(s,[{key:"subscribe",value:function(){}},{key:"unsubscribe",value:function(){}},{key:"listen",value:function(u,h){return this}},{key:"listenToAll",value:function(u){return this}},{key:"stopListening",value:function(u,h){return this}},{key:"subscribed",value:function(u){return this}},{key:"error",value:function(u){return this}},{key:"on",value:function(u,h){return this}}]),s}(ye),sn=function(i){z(s,i);var o=J(s);function s(){return F(this,s),o.apply(this,arguments)}return q(s,[{key:"whisper",value:function(u,h){return this}}]),s}(Lt),ya=function(i){z(s,i);var o=J(s);function s(){return F(this,s),o.apply(this,arguments)}return q(s,[{key:"here",value:function(u){return this}},{key:"joining",value:function(u){return this}},{key:"leaving",value:function(u){return this}},{key:"whisper",value:function(u,h){return this}}]),s}(Lt),ve=function(){function i(o){F(this,i),this._defaultOptions={auth:{headers:{}},authEndpoint:"/broadcasting/auth",userAuthentication:{endpoint:"/broadcasting/user-auth",headers:{}},broadcaster:"pusher",csrfToken:null,bearerToken:null,host:null,key:null,namespace:"App.Events"},this.setOptions(o),this.connect()}return q(i,[{key:"setOptions",value:function(s){this.options=se(this._defaultOptions,s);var c=this.csrfToken();return c&&(this.options.auth.headers["X-CSRF-TOKEN"]=c,this.options.userAuthentication.headers["X-CSRF-TOKEN"]=c),c=this.options.bearerToken,c&&(this.options.auth.headers.Authorization="Bearer "+c,this.options.userAuthentication.headers.Authorization="Bearer "+c),s}},{key:"csrfToken",value:function(){var s;return typeof window<"u"&&window.Laravel&&window.Laravel.csrfToken?window.Laravel.csrfToken:this.options.csrfToken?this.options.csrfToken:typeof document<"u"&&typeof document.querySelector=="function"&&(s=document.querySelector('meta[name="csrf-token"]'))?s.getAttribute("content"):null}}]),i}(),va=function(i){z(s,i);var o=J(s);function s(){var c;return F(this,s),c=o.apply(this,arguments),c.channels={},c}return q(s,[{key:"connect",value:function(){typeof this.options.client<"u"?this.pusher=this.options.client:this.options.Pusher?this.pusher=new this.options.Pusher(this.options.key,this.options):this.pusher=new Pusher(this.options.key,this.options)}},{key:"signin",value:function(){this.pusher.signin()}},{key:"listen",value:function(u,h,f){return this.channel(u).listen(h,f)}},{key:"channel",value:function(u){return this.channels[u]||(this.channels[u]=new Ut(this.pusher,u,this.options)),this.channels[u]}},{key:"privateChannel",value:function(u){return this.channels["private-"+u]||(this.channels["private-"+u]=new ha(this.pusher,"private-"+u,this.options)),this.channels["private-"+u]}},{key:"encryptedPrivateChannel",value:function(u){return this.channels["private-encrypted-"+u]||(this.channels["private-encrypted-"+u]=new fa(this.pusher,"private-encrypted-"+u,this.options)),this.channels["private-encrypted-"+u]}},{key:"presenceChannel",value:function(u){return this.channels["presence-"+u]||(this.channels["presence-"+u]=new pa(this.pusher,"presence-"+u,this.options)),this.channels["presence-"+u]}},{key:"leave",value:function(u){var h=this,f=[u,"private-"+u,"private-encrypted-"+u,"presence-"+u];f.forEach(function(y,b){h.leaveChannel(y)})}},{key:"leaveChannel",value:function(u){this.channels[u]&&(this.channels[u].unsubscribe(),delete this.channels[u])}},{key:"socketId",value:function(){return this.pusher.connection.socket_id}},{key:"disconnect",value:function(){this.pusher.disconnect()}}]),s}(ve),ma=function(i){z(s,i);var o=J(s);function s(){var c;return F(this,s),c=o.apply(this,arguments),c.channels={},c}return q(s,[{key:"connect",value:function(){var u=this,h=this.getSocketIO();return this.socket=h(this.options.host,this.options),this.socket.on("reconnect",function(){Object.values(u.channels).forEach(function(f){f.subscribe()})}),this.socket}},{key:"getSocketIO",value:function(){if(typeof this.options.client<"u")return this.options.client;if(typeof io<"u")return io;throw new Error("Socket.io client not found. Should be globally available or passed via options.client")}},{key:"listen",value:function(u,h,f){return this.channel(u).listen(h,f)}},{key:"channel",value:function(u){return this.channels[u]||(this.channels[u]=new xn(this.socket,u,this.options)),this.channels[u]}},{key:"privateChannel",value:function(u){return this.channels["private-"+u]||(this.channels["private-"+u]=new An(this.socket,"private-"+u,this.options)),this.channels["private-"+u]}},{key:"presenceChannel",value:function(u){return this.channels["presence-"+u]||(this.channels["presence-"+u]=new da(this.socket,"presence-"+u,this.options)),this.channels["presence-"+u]}},{key:"leave",value:function(u){var h=this,f=[u,"private-"+u,"presence-"+u];f.forEach(function(y){h.leaveChannel(y)})}},{key:"leaveChannel",value:function(u){this.channels[u]&&(this.channels[u].unsubscribe(),delete this.channels[u])}},{key:"socketId",value:function(){return this.socket.id}},{key:"disconnect",value:function(){this.socket.disconnect()}}]),s}(ve),ga=function(i){z(s,i);var o=J(s);function s(){var c;return F(this,s),c=o.apply(this,arguments),c.channels={},c}return q(s,[{key:"connect",value:function(){}},{key:"listen",value:function(u,h,f){return new Lt}},{key:"channel",value:function(u){return new Lt}},{key:"privateChannel",value:function(u){return new sn}},{key:"encryptedPrivateChannel",value:function(u){return new sn}},{key:"presenceChannel",value:function(u){return new ya}},{key:"leave",value:function(u){}},{key:"leaveChannel",value:function(u){}},{key:"socketId",value:function(){return"fake-socket-id"}},{key:"disconnect",value:function(){}}]),s}(ve),ba=function(){function i(o){F(this,i),this.options=o,this.connect(),this.options.withoutInterceptors||this.registerInterceptors()}return q(i,[{key:"channel",value:function(s){return this.connector.channel(s)}},{key:"connect",value:function(){this.options.broadcaster=="pusher"?this.connector=new va(this.options):this.options.broadcaster=="socket.io"?this.connector=new ma(this.options):this.options.broadcaster=="null"?this.connector=new ga(this.options):typeof this.options.broadcaster=="function"&&(this.connector=new this.options.broadcaster(this.options))}},{key:"disconnect",value:function(){this.connector.disconnect()}},{key:"join",value:function(s){return this.connector.presenceChannel(s)}},{key:"leave",value:function(s){this.connector.leave(s)}},{key:"leaveChannel",value:function(s){this.connector.leaveChannel(s)}},{key:"leaveAllChannels",value:function(){for(var s in this.connector.channels)this.leaveChannel(s)}},{key:"listen",value:function(s,c,u){return this.connector.listen(s,c,u)}},{key:"private",value:function(s){return this.connector.privateChannel(s)}},{key:"encryptedPrivate",value:function(s){return this.connector.encryptedPrivateChannel(s)}},{key:"socketId",value:function(){return this.connector.socketId()}},{key:"registerInterceptors",value:function(){typeof Vue=="function"&&Vue.http&&this.registerVueRequestInterceptor(),typeof axios=="function"&&this.registerAxiosRequestInterceptor(),typeof jQuery=="function"&&this.registerjQueryAjaxSetup(),(typeof Turbo>"u"?"undefined":oe(Turbo))==="object"&&this.registerTurboRequestInterceptor()}},{key:"registerVueRequestInterceptor",value:function(){var s=this;Vue.http.interceptors.push(function(c,u){s.socketId()&&c.headers.set("X-Socket-ID",s.socketId()),u()})}},{key:"registerAxiosRequestInterceptor",value:function(){var s=this;axios.interceptors.request.use(function(c){return s.socketId()&&(c.headers["X-Socket-Id"]=s.socketId()),c})}},{key:"registerjQueryAjaxSetup",value:function(){var s=this;typeof jQuery.ajax<"u"&&jQuery.ajaxPrefilter(function(c,u,h){s.socketId()&&h.setRequestHeader("X-Socket-Id",s.socketId())})}},{key:"registerTurboRequestInterceptor",value:function(){var s=this;document.addEventListener("turbo:before-fetch-request",function(c){c.detail.fetchOptions.headers["X-Socket-Id"]=s.socketId()})}}]),i}();function _a(){_app.backend={},_app.backend.http=On.create({baseURL:"http://api.untitled-app.localhost:8000",withCredentials:!0}),_app.backend.ws=new ba({broadcaster:"pusher",key:"1234",wsHost:"localhost",wsPort:6001,forceTLS:!1,disableStats:!0,cluster:"mt1"})}function wa(){_app.sampleAPI={},_app.sampleAPI.http=On.create({baseURL:"https://jsonplaceholder.typicode.com/",withCredentials:!0})}console.log("Hello! - from main.js");$o(()=>{window._app==null&&(window._app={}),_a(),wa()});function Sa(i){let o,s;const c=i[1].default,u=Uo(c,i,i[0],null);return{c(){o=Fo("div"),u&&u.c(),this.h()},l(h){o=qo(h,"DIV",{class:!0});var f=Bo(o);u&&u.l(f),f.forEach(Xe),this.h()},h(){Ho(o,"class","root svelte-1e0h95q")},m(h,f){Mo(h,o,f),u&&u.m(o,null),s=!0},p(h,[f]){u&&u.p&&(!s||f&1)&&zo(u,c,h,h[0],s?Wo(c,h[0],f,null):Jo(h[0]),null)},i(h){s||(Xo(u,h),s=!0)},o(h){Vo(u,h),s=!1},d(h){h&&Xe(o),u&&u.d(h)}}}function ka(i,o,s){let{$$slots:c={},$$scope:u}=o;return i.$$set=h=>{"$$scope"in h&&s(0,u=h.$$scope)},[u,c]}class Oa extends jo{constructor(o){super(),Io(this,o,ka,Sa,Do,{})}}export{Oa as default};
